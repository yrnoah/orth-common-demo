{"version":3,"file":"ConfirmModal.stories-31f45e2b.js","sources":["../../../paas-library/src/Modal/ConfirmModal.tsx"],"sourcesContent":["import { Modal } from \"./Modal\";\nimport React, { useEffect, useState } from \"react\";\nimport styled, { css, useTheme } from \"styled-components\";\nimport {\n  IconCircleFailFill,\n  IconCircleRemindFill,\n  IconTriangleRemindFill,\n  IconClose,\n} from \"../icons\";\nimport Checkbox from \"../Checkbox\";\nimport useCurrent from \"../hooks/useCurrent\";\n\nexport interface IModalProps\n  extends Omit<\n    React.HTMLAttributes<HTMLDivElement>,\n    \"title\" | \"children\" | \"onClick\"\n  > {\n  open: boolean;\n  /** @description title of the modal.  */\n  title: React.ReactNode;\n  /** @description content/subtitle of the modal.  */\n  children?: React.ReactNode;\n  /** @description replaces the icon  */\n  icon?:\n    | \"info\"\n    | \"warning\"\n    | \"error\"\n    | \"dangerous\"\n    | React.ReactElement<SVGSVGElement>;\n  /** @description confirm button icon */\n  confirmIcon?: React.ReactElement<SVGSVGElement>;\n  /** @description cancel button icon */\n  cancelIcon?: React.ReactElement<SVGSVGElement>;\n  /**\n   * @description modal theme.\n   * @default \"standard\"\n   */\n  theme?: \"standard\" | \"dangerous\";\n  /**\n   * @description confirm button text.\n   * @default \"Confirm\"\n   */\n  confirmText?: React.ReactNode;\n  /**\n   * @description cancel button text.\n   * @default \"Cancel\"\n   */\n  cancelText?: React.ReactNode;\n  /** @description click function on click confirm button.  */\n  onConfirm?: () => void;\n  /** @description click function on click cancel button.  */\n  onCancel?: () => void;\n  /** @description click function on click background layer.  */\n  onBGClick?: () => void;\n  /** @description disable confirm button.  */\n  disableConfirm?: boolean;\n  /** @description background layer style */\n  backgroundStyle?: React.CSSProperties;\n  /**\n   * @description display once checkbox text.\n   * @default \"Don’t show again\"\n   */\n  displayOnceText?: React.ReactNode;\n  /**\n   * @description unique display once storage key.\n   * @example \"coSimulationHistoryDeleteDisplayOnce\".\n   */\n  displayOnceStorageKey?: string;\n  /** @description modal header wrapper style */\n  headerStyle?: React.CSSProperties;\n  /** @description modal content wrapper style */\n  contentStyle?: React.CSSProperties;\n  /** @description modal footer wrapper style */\n  footerStyle?: React.CSSProperties;\n  /** @default false */\n  showCloseButton?: boolean;\n}\n\nexport function ConfirmModal({\n  open,\n  title,\n  children,\n  icon,\n  confirmIcon,\n  cancelIcon,\n  theme = \"standard\",\n  confirmText = \"Confirm\",\n  cancelText = \"Cancel\",\n  onConfirm,\n  onCancel,\n  onBGClick,\n  disableConfirm,\n  backgroundStyle,\n  displayOnceText = \"Don’t show again\",\n  displayOnceStorageKey,\n  headerStyle,\n  contentStyle,\n  footerStyle,\n  showCloseButton,\n  ...rest\n}: IModalProps) {\n  const onConfirmRef = useCurrent(onConfirm);\n  const { colors } = useTheme();\n  const [checked, setChecked] = useState(false);\n  const isDisplayOnce =\n    !!displayOnceStorageKey && !!localStorage.getItem(displayOnceStorageKey);\n  const _open = open && !isDisplayOnce;\n\n  useEffect(() => {\n    if (open && isDisplayOnce) {\n      onConfirmRef.current?.();\n    }\n  }, [open, isDisplayOnce, onConfirmRef]);\n\n  const handleSetStorage = () =>\n    !!displayOnceStorageKey &&\n    checked &&\n    localStorage.setItem(displayOnceStorageKey, \"true\");\n\n  const handleConfirm = () => {\n    handleSetStorage();\n    onConfirm?.();\n  };\n\n  const handleCancel = () => {\n    handleSetStorage();\n    onCancel?.();\n  };\n\n  const handleBGClick = () => {\n    handleSetStorage();\n    onBGClick?.();\n  };\n\n  const renderIcon =\n    typeof icon === \"string\"\n      ? {\n          info: <IconCircleRemindFill color={colors.elementsHintPlain} />,\n          warning: (\n            <IconTriangleRemindFill color={colors.elementsHintWarning} />\n          ),\n          error: <IconCircleFailFill color={colors.elementsHintDanger} />,\n          dangerous: (\n            <IconTriangleRemindFill color={colors.elementsHintDanger} />\n          ),\n        }[icon]\n      : icon;\n\n  return (\n    <Modal\n      open={_open}\n      onBGClick={handleBGClick}\n      backgroundStyle={{\n        background: colors.filterShade200,\n        backdropFilter: \"blur(2px)\",\n        ...backgroundStyle,\n      }}\n    >\n      <ModalWrapper {...rest}>\n        <Header style={headerStyle}>\n          <Title>\n            {!!renderIcon && <Icon>{renderIcon}</Icon>}\n            <span>{title}</span>\n          </Title>\n          <CloseButton onClick={onCancel}>\n            <IconClose />\n          </CloseButton>\n        </Header>\n        <Content style={contentStyle}>{children}</Content>\n        <Footer style={footerStyle}>\n          <FooterLeft>\n            {!!displayOnceStorageKey && (\n              <CheckboxWrapper>\n                <Checkbox\n                  size={14}\n                  checked={checked}\n                  onChange={() => setChecked(!checked)}\n                />\n                {displayOnceText}\n              </CheckboxWrapper>\n            )}\n          </FooterLeft>\n          <FooterRight>\n            <Btn onClick={handleCancel}>\n              {cancelIcon}\n              <span>{cancelText}</span>\n            </Btn>\n            <Btn\n              onClick={handleConfirm}\n              $type={theme}\n              disabled={disableConfirm}\n            >\n              {confirmIcon}\n              <span>{confirmText}</span>\n            </Btn>\n          </FooterRight>\n        </Footer>\n      </ModalWrapper>\n    </Modal>\n  );\n}\n\nconst Row = styled.div`\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n`;\n\nconst Icon = styled.div`\n  width: 40px;\n  height: 40px;\n  padding: 10px;\n  border-radius: 16px;\n  background: ${(p) => p.theme.colors.container300};\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nconst Title = styled(Row)`\n  ${(p) => p.theme.fonts[\"Document-Sheet/H3\"]};\n  gap: 16px;\n`;\n\nconst Content = styled.div`\n  ${(p) => p.theme.fonts[\"Document-Sheet/Paragraph\"]};\n  padding: 28px 8px;\n`;\n\nconst CloseButton = styled.div`\n  width: 32px;\n  height: 32px;\n  padding: 6px;\n  border-radius: 4px;\n  opacity: 0.7;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst CheckboxWrapper = styled(Row)`\n  gap: 4px;\n  ${(p) => p.theme.fonts.Compact}\n  color: ${(p) => p.theme.colors.elementsContentSub};\n`;\n\nconst Btn = styled.button<{ $type?: string }>`\n  outline: none;\n  margin: 0;\n  user-select: none;\n  flex-shrink: 0;\n  height: 48px;\n  padding: 0 16px;\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n  gap: 2px;\n  ${(p) => p.theme.fonts.Default}\n  background: ${(p) => p.theme.colors.elementsBackground};\n  border-radius: 4px;\n  border: 1px solid ${(p) => p.theme.colors.elementsDivider};\n  transition: all 100ms linear;\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n\n  &:hover {\n    background: ${(p) => p.theme.colors.elementsBackgroundAlt};\n  }\n\n  ${(p) => {\n    switch (p.$type) {\n      case \"standard\":\n        return css`\n          background: ${(p) => p.theme.colors.accentPrimaryEnabled};\n          border: 1px solid ${(p) => p.theme.colors.accentPrimaryEnabled};\n          color: ${(p) => p.theme.colors.textContrast600};\n\n          &:hover {\n            background: ${(p) => p.theme.colors.accentPrimaryHovered};\n            border: 1px solid ${(p) => p.theme.colors.accentPrimaryHovered};\n          }\n        `;\n      case \"dangerous\":\n        return css`\n          background: ${(p) => p.theme.colors.accentDangerEnabled};\n          border: 1px solid ${(p) => p.theme.colors.accentDangerEnabled};\n          color: ${(p) => p.theme.colors.textContrast600};\n\n          &:hover {\n            background: ${(p) => p.theme.colors.accentDangerHovered};\n            border: 1px solid ${(p) => p.theme.colors.accentDangerHovered};\n          }\n        `;\n    }\n  }}\n\n  &:disabled {\n    color: ${(p) => p.theme.colors.elementsContentMain};\n    background-color: ${(p) => p.theme.colors.elementsBackground};\n    border-color: ${(p) => p.theme.colors.elementsBackground};\n    cursor: not-allowed;\n\n    & > span {\n      opacity: 0.3;\n    }\n  }\n`;\n\nconst Header = styled(Row)`\n  min-height: 40px;\n  justify-content: space-between;\n`;\n\nconst FooterLeft = styled(Row)`\n  gap: 8px;\n  ${(p) => p.theme.fonts[\"Body-Medium/Regular\"]}\n  color:${(p) => p.theme.colors.noColor.Grey14};\n`;\n\nconst FooterRight = styled(Row)`\n  justify-content: flex-end;\n  gap: 8px;\n`;\n\nconst Footer = styled(Row)`\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst ModalWrapper = styled.div`\n  width: 400px;\n  padding: 16px;\n  ${(p) => p.theme.flex.column}\n  gap: 16px;\n  z-index: ${(p) => p.theme.zIndexes.modal};\n  border-radius: 16px;\n  background: ${(p) => p.theme.colors.container100};\n  box-shadow: ${(p) => p.theme.colors.shadowPop};\n  color: ${(p) => p.theme.colors.elementsContentMain};\n`;\n"],"names":["ConfirmModal","open","title","children","icon","confirmIcon","cancelIcon","theme","confirmText","cancelText","onConfirm","onCancel","onBGClick","disableConfirm","backgroundStyle","displayOnceText","displayOnceStorageKey","headerStyle","contentStyle","footerStyle","showCloseButton","rest","onConfirmRef","useCurrent","colors","useTheme","checked","setChecked","useState","isDisplayOnce","_open","useEffect","_a","handleSetStorage","handleConfirm","handleCancel","handleBGClick","renderIcon","jsx","IconCircleRemindFill","IconTriangleRemindFill","IconCircleFailFill","Modal","jsxs","ModalWrapper","Header","Title","Icon","CloseButton","IconClose","Content","Footer","FooterLeft","CheckboxWrapper","Checkbox","FooterRight","Btn","Row","styled","p","css","p2"],"mappings":"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"}