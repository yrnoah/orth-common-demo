{"version":3,"file":"ConfirmModal.stories-a2edd406.js","sources":["../../../paas-library/src/Modal/ConfirmModal.tsx"],"sourcesContent":["import { Modal } from \"./Modal\";\nimport React, { useEffect, useState } from \"react\";\nimport styled, { css, useTheme } from \"styled-components\";\nimport {\n  IconCircleFailFill,\n  IconCircleRemindFill,\n  IconTriangleRemindFill,\n  IconClose,\n} from \"../icons\";\nimport Checkbox from \"../Checkbox\";\nimport useCurrent from \"../hooks/useCurrent\";\n\nexport interface IModalProps\n  extends Omit<\n    React.HTMLAttributes<HTMLDivElement>,\n    \"title\" | \"children\" | \"onClick\"\n  > {\n  open: boolean;\n  /** @description title of the modal.  */\n  title: React.ReactNode;\n  /** @description content/subtitle of the modal.  */\n  children?: React.ReactNode;\n  /** @description replaces the icon  */\n  icon?:\n    | \"info\"\n    | \"warning\"\n    | \"error\"\n    | \"dangerous\"\n    | React.ReactElement<SVGSVGElement>;\n  /** @description confirm button icon */\n  confirmIcon?: React.ReactElement<SVGSVGElement>;\n  /** @description cancel button icon */\n  cancelIcon?: React.ReactElement<SVGSVGElement>;\n  /**\n   * @description modal theme.\n   * @default \"standard\"\n   */\n  theme?: \"standard\" | \"dangerous\";\n  /**\n   * @description confirm button text.\n   * @default \"Confirm\"\n   */\n  confirmText?: React.ReactNode;\n  /**\n   * @description cancel button text.\n   * @default \"Cancel\"\n   */\n  cancelText?: React.ReactNode;\n  /** @description click function on click confirm button.  */\n  onConfirm?: () => void;\n  /** @description click function on click cancel button.  */\n  onCancel?: () => void;\n  /** @description click function on click background layer.  */\n  onBGClick?: () => void;\n  /** @description disable confirm button.  */\n  disableConfirm?: boolean;\n  /** @description background layer style */\n  backgroundStyle?: React.CSSProperties;\n  /**\n   * @description display once checkbox text.\n   * @default \"Don’t show again\"\n   */\n  displayOnceText?: React.ReactNode;\n  /**\n   * @description unique display once storage key.\n   * @example \"coSimulationHistoryDeleteDisplayOnce\".\n   */\n  displayOnceStorageKey?: string;\n  /** @description modal header wrapper style */\n  headerStyle?: React.CSSProperties;\n  /** @description modal content wrapper style */\n  contentStyle?: React.CSSProperties;\n  /** @description modal footer wrapper style */\n  footerStyle?: React.CSSProperties;\n  /** @default false */\n  showCloseButton?: boolean;\n}\n\nexport function ConfirmModal({\n  open,\n  title,\n  children,\n  icon,\n  confirmIcon,\n  cancelIcon,\n  theme = \"standard\",\n  confirmText = \"Confirm\",\n  cancelText = \"Cancel\",\n  onConfirm,\n  onCancel,\n  onBGClick,\n  disableConfirm,\n  backgroundStyle,\n  displayOnceText = \"Don’t show again\",\n  displayOnceStorageKey,\n  headerStyle,\n  contentStyle,\n  footerStyle,\n  showCloseButton,\n  ...rest\n}: IModalProps) {\n  const onConfirmRef = useCurrent(onConfirm);\n  const { colors } = useTheme();\n  const [checked, setChecked] = useState(false);\n  const isDisplayOnce =\n    !!displayOnceStorageKey && !!localStorage.getItem(displayOnceStorageKey);\n  const _open = open && !isDisplayOnce;\n\n  useEffect(() => {\n    if (open && isDisplayOnce) {\n      onConfirmRef.current?.();\n    }\n  }, [open, isDisplayOnce, onConfirmRef]);\n\n  const handleSetStorage = () =>\n    !!displayOnceStorageKey &&\n    checked &&\n    localStorage.setItem(displayOnceStorageKey, \"true\");\n\n  const handleConfirm = () => {\n    handleSetStorage();\n    onConfirm?.();\n  };\n\n  const handleCancel = () => {\n    handleSetStorage();\n    onCancel?.();\n  };\n\n  const handleBGClick = () => {\n    handleSetStorage();\n    onBGClick?.();\n  };\n\n  const renderIcon =\n    typeof icon === \"string\"\n      ? {\n          info: <IconCircleRemindFill color={colors.elementsHintPlain} />,\n          warning: (\n            <IconTriangleRemindFill color={colors.elementsHintWarning} />\n          ),\n          error: <IconCircleFailFill color={colors.elementsHintDanger} />,\n          dangerous: (\n            <IconTriangleRemindFill color={colors.elementsHintDanger} />\n          ),\n        }[icon]\n      : icon;\n\n  return (\n    <Modal\n      open={_open}\n      onBGClick={handleBGClick}\n      backgroundStyle={{\n        background: colors.filterShade200,\n        backdropFilter: \"blur(2px)\",\n        ...backgroundStyle,\n      }}\n    >\n      <ModalWrapper {...rest}>\n        <Header style={headerStyle}>\n          <Title>\n            {!!renderIcon && <Icon>{renderIcon}</Icon>}\n            <span>{title}</span>\n          </Title>\n          <CloseButton onClick={onCancel}>\n            <IconClose />\n          </CloseButton>\n        </Header>\n        <Content style={contentStyle}>{children}</Content>\n        <Footer style={footerStyle}>\n          <FooterLeft>\n            {!!displayOnceStorageKey && (\n              <CheckboxWrapper>\n                <Checkbox\n                  size={14}\n                  checked={checked}\n                  onChange={() => setChecked(!checked)}\n                />\n                {displayOnceText}\n              </CheckboxWrapper>\n            )}\n          </FooterLeft>\n          <FooterRight>\n            <Btn onClick={handleCancel}>\n              {cancelIcon}\n              <span>{cancelText}</span>\n            </Btn>\n            <Btn\n              onClick={handleConfirm}\n              $type={theme}\n              disabled={disableConfirm}\n            >\n              {confirmIcon}\n              <span>{confirmText}</span>\n            </Btn>\n          </FooterRight>\n        </Footer>\n      </ModalWrapper>\n    </Modal>\n  );\n}\n\nconst Row = styled.div`\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n`;\n\nconst Icon = styled.div`\n  width: 40px;\n  height: 40px;\n  padding: 10px;\n  border-radius: 16px;\n  background: ${(p) => p.theme.colors.container300};\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nconst Title = styled(Row)`\n  ${(p) => p.theme.fonts[\"Document-Sheet/H3\"]};\n  gap: 16px;\n`;\n\nconst Content = styled.div`\n  ${(p) => p.theme.fonts[\"Document-Sheet/Paragraph\"]};\n  padding: 28px 8px;\n`;\n\nconst CloseButton = styled.div`\n  width: 32px;\n  height: 32px;\n  padding: 6px;\n  border-radius: 4px;\n  opacity: 0.7;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst CheckboxWrapper = styled(Row)`\n  gap: 4px;\n  ${(p) => p.theme.fonts.Compact}\n  color: ${(p) => p.theme.colors.elementsContentSub};\n`;\n\nconst Btn = styled.button<{ $type?: string }>`\n  outline: none;\n  margin: 0;\n  user-select: none;\n  flex-shrink: 0;\n  height: 48px;\n  padding: 0 16px;\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n  gap: 2px;\n  ${(p) => p.theme.fonts.Default}\n  background: ${(p) => p.theme.colors.elementsBackground};\n  border-radius: 4px;\n  border: 1px solid ${(p) => p.theme.colors.elementsDivider};\n  transition: all 100ms linear;\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n\n  &:hover {\n    background: ${(p) => p.theme.colors.elementsBackgroundAlt};\n  }\n\n  ${(p) => {\n    switch (p.$type) {\n      case \"standard\":\n        return css`\n          background: ${(p) => p.theme.colors.accentPrimaryEnabled};\n          border: 1px solid ${(p) => p.theme.colors.accentPrimaryEnabled};\n          color: ${(p) => p.theme.colors.textContrast600};\n\n          &:hover {\n            background: ${(p) => p.theme.colors.accentPrimaryHovered};\n            border: 1px solid ${(p) => p.theme.colors.accentPrimaryHovered};\n          }\n        `;\n      case \"dangerous\":\n        return css`\n          background: ${(p) => p.theme.colors.accentDangerEnabled};\n          border: 1px solid ${(p) => p.theme.colors.accentDangerEnabled};\n          color: ${(p) => p.theme.colors.textContrast600};\n\n          &:hover {\n            background: ${(p) => p.theme.colors.accentDangerHovered};\n            border: 1px solid ${(p) => p.theme.colors.accentDangerHovered};\n          }\n        `;\n    }\n  }}\n\n  &:disabled {\n    color: ${(p) => p.theme.colors.elementsContentMain};\n    background-color: ${(p) => p.theme.colors.elementsBackground};\n    border-color: ${(p) => p.theme.colors.elementsBackground};\n    cursor: not-allowed;\n\n    & > span {\n      opacity: 0.3;\n    }\n  }\n`;\n\nconst Header = styled(Row)`\n  min-height: 40px;\n  justify-content: space-between;\n`;\n\nconst FooterLeft = styled(Row)`\n  gap: 8px;\n  ${(p) => p.theme.fonts[\"Body-Medium/Regular\"]}\n  color:${(p) => p.theme.colors.noColor.Grey14};\n`;\n\nconst FooterRight = styled(Row)`\n  justify-content: flex-end;\n  gap: 8px;\n`;\n\nconst Footer = styled(Row)`\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst ModalWrapper = styled.div`\n  width: 400px;\n  padding: 16px;\n  ${(p) => p.theme.flex.column}\n  gap: 16px;\n  z-index: ${(p) => p.theme.zIndexes.modal};\n  border-radius: 16px;\n  background: ${(p) => p.theme.colors.container100};\n  box-shadow: ${(p) => p.theme.colors.shadowPop};\n  color: ${(p) => p.theme.colors.elementsContentMain};\n`;\n"],"names":["ConfirmModal","open","title","children","icon","confirmIcon","cancelIcon","confirmText","cancelText","onConfirm","onCancel","onBGClick","disableConfirm","backgroundStyle","displayOnceStorageKey","headerStyle","contentStyle","footerStyle","showCloseButton","onConfirmRef","useCurrent","colors","checked","setChecked","useState","isDisplayOnce","_open","useEffect","handleSetStorage","handleConfirm","handleCancel","handleBGClick","renderIcon","jsx","IconCircleRemindFill","IconTriangleRemindFill","IconCircleFailFill","Modal","filterShade200","jsxs","Header","Title","Icon","CloseButton","IconClose","Content","Footer","FooterLeft","CheckboxWrapper","Checkbox","displayOnceText","FooterRight","Btn","theme","Row","styled","div","row","p","Compact","button","center","Default","elementsBackground","elementsDivider","elementsBackgroundAlt","css","accentPrimaryEnabled","textContrast600","accentPrimaryHovered","accentDangerEnabled","accentDangerHovered","elementsContentMain","ModalWrapper","column","modal","container100","shadowPop"],"mappings":"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"}