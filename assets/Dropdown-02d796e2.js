import{j as W}from"./jsx-runtime-94f6e698.js";import{r}from"./index-8db94870.js";import{p as U}from"./styled-components.browser.esm-6dd904cc.js";import{P as G,a as J}from"./Portal-01fdeda0.js";import{u as X}from"./useCurrent-3439251d.js";import{o as $,a as z,i as F,u as K}from"./useMeasure-2fb4c371.js";var Q=["mousedown","touchstart"],ee=function(e,o,l){l===void 0&&(l=Q);var s=r.useRef(o);r.useEffect(function(){s.current=o},[o]),r.useEffect(function(){for(var t=function(a){var h=e.current;h&&!h.contains(a.target)&&s.current(a)},i=0,c=l;i<c.length;i++){var R=c[i];$(document,R,t)}return function(){for(var a=0,h=l;a<h.length;a++){var u=h[a];z(document,u,t)}}},[l,e])};const te=ee;var ne=function(e){r.useEffect(e,[])};const re=ne;var oe=function(e){var o=r.useRef(e);o.current=e,re(function(){return function(){return o.current()}})};const le=oe;var ie=function(e){var o=r.useRef(0),l=r.useState(e),s=l[0],t=l[1],i=r.useCallback(function(c){cancelAnimationFrame(o.current),o.current=requestAnimationFrame(function(){t(c)})},[]);return le(function(){cancelAnimationFrame(o.current)}),[s,i]};const k=ie,ae=function(){var e=r.useState(0),o=e[0],l=e[1];return r.useEffect(function(){var s=function(t){l(t.deltaY+o)};return $(window,"wheel",s,!1),function(){return z(window,"wheel",s)}}),o};var se=function(e){var o=k({x:0,y:0}),l=o[0],s=o[1];return r.useEffect(function(){var t=function(){e.current&&s({x:e.current.scrollLeft,y:e.current.scrollTop})};return e.current&&$(e.current,"scroll",t,{capture:!1,passive:!0}),function(){e.current&&z(e.current,"scroll",t)}},[e]),l};const ue=se;var fe=function(){var e=k(function(){return{x:F?window.pageXOffset:0,y:F?window.pageYOffset:0}}),o=e[0],l=e[1];return r.useEffect(function(){var s=function(){l(function(t){var i=window.pageXOffset,c=window.pageYOffset;return t.x!==i||t.y!==c?{x:i,y:c}:t})};return s(),$(window,"scroll",s,{capture:!1,passive:!0}),function(){z(window,"scroll",s)}},[]),o};const ce=fe;function de(e=300,o=0,l=40,s=!1,t,i=!1){const c=r.useRef(null),[R,a]=k(0),[h,u]=k(0),[O,E]=r.useState(120),[m,M]=r.useState(l),[g,v]=r.useState(()=>{switch(t){default:return!1;case"top":case"top-left":case"top-right":return!0}}),[V,C]=r.useState(()=>{switch(t){case"left-top":case"left":case"left-bottom":case"right-top":case"right":case"right-bottom":return"horizontal";default:return"vertical"}}),p=r.useCallback((n,w=300)=>{const q=i?0:m;E(n.width),n.height&&M(n.height);const y=o||n.width,T=window.innerHeight-n.bottom,A=n.left+y-window.innerWidth>0&&y>0;let x=T<w;if((s||t==="bottom"||t==="bottom-left"||t==="bottom-right")&&(x=!1),(t==="top"||t==="top-left"||t==="top-right")&&(x=!0),n.top<w&&(x=!1),n.top!==R&&!x){let d=(n.top||0)+q;i&&d+e>window.innerHeight&&(d=window.innerHeight-e-m),a(d)}if(x&&R!==n.top-w){let d=n.top-w;i&&(d=d+m),a(d)}if(t!=null&&t.startsWith("left-")||t==="left"||t!=null&&t.startsWith("right-")||t==="right"){const d=t==null?void 0:t.startsWith("right");u(d?n.left+n.width:Math.max(0,n.left-y)),t!=null&&t.endsWith("-top")?a(n.top):t!=null&&t.endsWith("-bottom")?a(Math.max(0,n.top+n.height-w)):a(Math.max(0,n.top+(n.height-w)/2)),C("horizontal");return}if(t==="bottom-right"||t==="top-right"){u(n.left-y+n.width);return}if(t==="bottom"||t==="top"){u(n.left-(y-n.width)*.5);return}if(t==="bottom-left"||t==="top-left"){u(n.left||0);return}v(x),A||u(n.left||0),A&&u(n.left-y+n.width)},[o,e,s,t,R,a,m,u,i]),S=r.useCallback(()=>{const n=c.current;n&&n.getBoundingClientRect&&p(n.getBoundingClientRect(),e)},[e,c,p]),b=X(S);return r.useEffect(()=>{b.current()},[b,e,c]),{onHoverUpdateRect:S,updateRect:p,top:Math.max(R,0),isTop:g,left:Math.max(h,0),width:O,height:m,ref:c,placement:V}}function he(e){if(Array.isArray(e))return!1;switch(typeof e){default:return!1;case"string":case"number":case"bigint":case"boolean":case"undefined":return!1;case"object":case"function":case"symbol":return r.isValidElement(e)}}function Y(e){const{overlayContainerStyle:o,visible:l,onVisibleChange:s,disableAnimation:t,disableAutoDismiss:i,parentNodeID:c=J,scrollRef:R,triggerType:a="click",fitToTrigger:h=!1}=e,u=r.useRef(!1),[O,{height:E,width:m}]=K(),M=X(s),[g,v]=r.useState(!!l);r.useEffect(()=>{v(f=>f!==l?!!l:f)},[l]),r.useEffect(()=>{M.current&&M.current(g)},[g,M]);const V=!!E&&!!m,{ref:C,top:p,left:S,onHoverUpdateRect:b,isTop:n,placement:w}=de(E,m,32,!1,e.position,h);te(C,()=>{i||u.current||v(!1)});const q=ae();r.useEffect(()=>{if(i){b();return}u.current||q&&v(!1)},[q,i,b]);const{x:y,y:T}=ce(),A=r.useRef(null),{x,y:d}=ue(R||A);r.useEffect(()=>{if(i){b();return}u.current||!y&&!T&&!x&&!d||v(!1)},[i,b,y,T,x,d]);const P=r.useMemo(()=>{var N;const f=V&&g?1:0,Z=V&&g?"auto":"none",D=h?1:.1;let I=p,_=S,H="50vh";const L=window.innerHeight??document.body.clientHeight;return E&&L&&(n||(H=`${Math.max(L-p-8,200)}px`)),!t&&!g&&(w==="horizontal"?((N=e.position)==null?void 0:N.startsWith("right"))?_=S-D*m:_=S+D*m:n?I=p+D*E:I=p-D*E),t&&(I=p,_=S),{transition:t?"none":void 0,pointerEvents:Z,opacity:f,...o||{},zIndex:g?o==null?void 0:o.zIndex:-1,top:I,left:_,maxHeight:H}},[V,g,p,n,t,o,S,h,w,e.position,E,m]),j=r.useCallback(()=>{u.current=!0,a==="hover"&&v(!0),b()},[b,a]),B=he(e.children);return W.jsxs(W.Fragment,{children:[B&&r.cloneElement(e.children,{ref:f=>{"ref"in e.children&&typeof e.children.ref=="function"&&e.children.ref(f),"ref"in e.children&&typeof e.children.ref=="object"&&e.children.ref&&"current"in e.children.ref&&(e.children.ref.current=f),C.current=f},onMouseEnter:f=>{e.children.props.onMouseEnter&&e.children.props.onMouseEnter(f),j()},onMouseLeave:f=>{e.children.props.onMouseLeave&&e.children.props.onMouseLeave(f),u.current=!1,a==="hover"&&v(!1)}}),!B&&W.jsx(me,{ref:C,style:e.style,onMouseEnter:j,onMouseLeave:()=>{u.current=!1,a==="hover"&&v(!1)},role:"select",children:e.children}),!!e.overlay&&W.jsx(G,{id:c,children:W.jsx(ve,{style:P,ref:f=>f&&O(f),onMouseEnter:j,onMouseLeave:()=>{u.current=!1,a==="hover"&&v(!1)},$maxHeight:P.maxHeight,children:e.overlay})})]})}const me=U.div`
  position: relative;
  display: flex;
  flex: none;
  width: max-content;
  align-items: center;
  box-sizing: border-box;
`,ve=U.div`
  position: fixed;
  z-index: ${e=>e.theme.zIndexes.dropdownZIndex};
  width: max-content;
  box-sizing: border-box;
  max-height: 80vh;
  transition: top 0.2s ease, left 0.2s ease, opacity 0.2s ease;

  && > * {
    max-height: ${e=>e.$maxHeight??"80vh"};
  }
`;try{Y.displayName="BaseDropdown",Y.__docgenInfo={description:"",displayName:"BaseDropdown",props:{children:{defaultValue:null,description:"trigger component",name:"children",required:!1,type:{name:"ReactNode"}},triggerType:{defaultValue:{value:'"click"'},description:"",name:"triggerType",required:!1,type:{name:"enum",value:[{value:'"click"'},{value:'"hover"'}]}},overlay:{defaultValue:null,description:"dropdown component",name:"overlay",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"trigger wrapper styles",name:"style",required:!1,type:{name:"CSSProperties"}},overlayContainerStyle:{defaultValue:null,description:"dropdown wrapper styles",name:"overlayContainerStyle",required:!1,type:{name:"CSSProperties"}},position:{defaultValue:{value:`undefined = auto
dropdown position:
- Vertical positions: "top-left" | "top" | "top-right" | "bottom-left" | "bottom" | "bottom-right"
- Horizontal positions: "left-top" | "left" | "left-bottom" | "right-top" | "right" | "right-bottom"
- Auto: "auto" | undefined`},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"left"'},{value:'"right"'},{value:'"bottom"'},{value:'"top"'},{value:'"top-left"'},{value:'"top-right"'},{value:'"bottom-left"'},{value:'"bottom-right"'},{value:'"left-top"'},{value:'"left-bottom"'},{value:'"right-top"'},{value:'"right-bottom"'}]}},visible:{defaultValue:null,description:"dropdown visible",name:"visible",required:!1,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"dropdown visible onChange callback",name:"onVisibleChange",required:!1,type:{name:"((visible: boolean) => void)"}},disableAutoDismiss:{defaultValue:null,description:"disable the auto dismiss when user click or scroll outside",name:"disableAutoDismiss",required:!1,type:{name:"boolean"}},disableAnimation:{defaultValue:null,description:"disable dropdown enter & leave default animation",name:"disableAnimation",required:!1,type:{name:"boolean"}},parentNodeID:{defaultValue:{value:"dropdownPortalID (`orthogonal-dropdown-overlay`)"},description:"ID of the dom element, which will be insert the dropdown items",name:"parentNodeID",required:!1,type:{name:"string"}},scrollRef:{defaultValue:null,description:"the scroll element ref, add listener to watch scroll event",name:"scrollRef",required:!1,type:{name:"RefObject<HTMLElement>"}},fitToTrigger:{defaultValue:{value:"false"},description:"@description when set to true, overlay position should cover trigger",name:"fitToTrigger",required:!1,type:{name:"boolean"}}}}}catch{}export{Y as B};
//# sourceMappingURL=Dropdown-02d796e2.js.map
