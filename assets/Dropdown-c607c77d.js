import{j as C}from"./jsx-runtime-94f6e698.js";import{r}from"./index-8db94870.js";import{p as P}from"./styled-components.browser.esm-655d472d.js";import{P as $,a as U}from"./Portal-2b207d51.js";import{u as N}from"./useCurrent-3439251d.js";import{u as X,a as H}from"./useEffectOnce-838fab99.js";import{u as Z}from"./useMeasure-361079ab.js";import{o as O,a as k,i as j}from"./util-051783c3.js";var G=function(e){var o=r.useRef(e);o.current=e,X(function(){return function(){return o.current()}})};const J=G;var K=function(e){var o=r.useRef(0),i=r.useState(e),l=i[0],t=i[1],s=r.useCallback(function(c){cancelAnimationFrame(o.current),o.current=requestAnimationFrame(function(){t(c)})},[]);return J(function(){cancelAnimationFrame(o.current)}),[l,s]};const T=K,Q=function(){var e=r.useState(0),o=e[0],i=e[1];return r.useEffect(function(){var l=function(t){i(t.deltaY+o)};return O(window,"wheel",l,!1),function(){return k(window,"wheel",l)}}),o};var ee=function(e){var o=T({x:0,y:0}),i=o[0],l=o[1];return r.useEffect(function(){var t=function(){e.current&&l({x:e.current.scrollLeft,y:e.current.scrollTop})};return e.current&&O(e.current,"scroll",t,{capture:!1,passive:!0}),function(){e.current&&k(e.current,"scroll",t)}},[e]),i};const te=ee;var ne=function(){var e=T(function(){return{x:j?window.pageXOffset:0,y:j?window.pageYOffset:0}}),o=e[0],i=e[1];return r.useEffect(function(){var l=function(){i(function(t){var s=window.pageXOffset,c=window.pageYOffset;return t.x!==s||t.y!==c?{x:s,y:c}:t})};return l(),O(window,"scroll",l,{capture:!1,passive:!0}),function(){k(window,"scroll",l)}},[]),o};const re=ne;function oe(e=300,o=0,i=40,l=!1,t,s=!1){const c=r.useRef(null),[x,h]=T(0),[S,u]=T(0),[A,M]=r.useState(120),[w,E]=r.useState(i),[d,m]=r.useState(()=>{switch(t){default:return!1;case"top":case"top-left":case"top-right":return!0}}),g=r.useCallback((n,f=300)=>{const _=s?0:w;M(n.width),n.height&&E(n.height);const b=o||n.width,q=window.innerHeight-n.bottom,V=n.left+b-window.innerWidth>0&&b>0;let y=q<f;if((l||t==="bottom"||t==="bottom-left"||t==="bottom-right")&&(y=!1),(t==="top"||t==="top-left"||t==="top-right")&&(y=!0),n.top<f&&(y=!1),n.top!==x&&!y){let p=(n.top||0)+_;s&&p+e>window.innerHeight&&(p=window.innerHeight-e-w),h(p)}if(y&&x!==n.top-f){let p=n.top-f;s&&(p=p+w),h(p)}if(t==="bottom-right"||t==="top-right"){u(n.left-b+n.width);return}if(t==="bottom"||t==="top"){u(n.left-(b-n.width)*.5);return}if(t==="bottom-left"||t==="top-left"){u(n.left||0);return}m(y),V||u(n.left||0),V&&u(n.left-b+n.width)},[o,e,l,t,x,h,w,u,s]),R=r.useCallback(()=>{const n=c.current;n&&n.getBoundingClientRect&&g(n.getBoundingClientRect(),e)},[e,c,g]),v=N(R);return r.useEffect(()=>{v.current()},[v,e,c]),{onHoverUpdateRect:R,updateRect:g,top:Math.max(x,0),isTop:d,left:S,width:A,height:w,ref:c}}function ie(e){if(Array.isArray(e))return!1;switch(typeof e){default:return!1;case"string":case"number":case"bigint":case"boolean":case"undefined":return!1;case"object":case"function":case"symbol":return r.isValidElement(e)}}function L(e){const{overlayContainerStyle:o,visible:i,onVisibleChange:l,disableAnimation:t,disableAutoDismiss:s,parentNodeID:c=U,scrollRef:x,triggerType:h="click",fitToTrigger:S=!1}=e,u=r.useRef(!1),[A,{height:M,width:w}]=Z(),E=N(l),[d,m]=r.useState(!!i);r.useEffect(()=>{m(a=>a!==i?!!i:a)},[i]),r.useEffect(()=>{E.current&&E.current(d)},[d,E]);const g=!!M&&!!w,{ref:R,top:v,left:n,onHoverUpdateRect:f,isTop:_}=oe(M,w,32,!1,e.position,S);H(R,()=>{s||u.current||m(!1)});const b=Q();r.useEffect(()=>{if(s){f();return}u.current||b&&m(!1)},[b,s,f]);const{x:q,y:V}=re(),y=r.useRef(null),{x:p,y:W}=te(x||y);r.useEffect(()=>{if(s){f();return}u.current||!q&&!V&&!p&&!W||m(!1)},[s,f,q,V,p,W]);const z=r.useMemo(()=>{const a=g&&d?1:0,F=g&&d?"auto":"none",Y=S?1:1.1;let I=d?v:v*(S?1:.9);return _&&(I=d?v:v*Y),t&&(I=v),{transition:t?"none":void 0,pointerEvents:F,opacity:a,...o||{},zIndex:d?o==null?void 0:o.zIndex:-1,top:I,left:n}},[g,d,v,_,t,o,n,S]),D=r.useCallback(()=>{u.current=!0,h==="hover"&&m(!0),f()},[f,h]),B=ie(e.children);return C.jsxs(C.Fragment,{children:[B&&r.cloneElement(e.children,{ref:a=>{"ref"in e.children&&typeof e.children.ref=="function"&&e.children.ref(a),"ref"in e.children&&typeof e.children.ref=="object"&&e.children.ref&&"current"in e.children.ref&&(e.children.ref.current=a),R.current=a},onMouseEnter:a=>{e.children.props.onMouseEnter&&e.children.props.onMouseEnter(a),D()},onMouseLeave:a=>{e.children.props.onMouseLeave&&e.children.props.onMouseLeave(a),u.current=!1,h==="hover"&&m(!1)}}),!B&&C.jsx(le,{ref:R,style:e.style,onMouseEnter:D,onMouseLeave:()=>{u.current=!1,h==="hover"&&m(!1)},role:"select",children:e.children}),!!e.overlay&&C.jsx($,{id:c,children:C.jsx(se,{style:z,ref:a=>a&&A(a),onMouseEnter:D,onMouseLeave:()=>{u.current=!1,h==="hover"&&m(!1)},children:e.overlay})})]})}const le=P.div`
  position: relative;
  display: flex;
  flex: none;
  width: max-content;
  align-items: center;
  box-sizing: border-box;
`,se=P.div`
  position: fixed;
  z-index: ${e=>e.theme.zIndexes.dropdownZIndex};
  width: max-content;
  box-sizing: border-box;
  max-height: 80vh;
  transition: top 0.2s ease, opacity 0.2s ease;
`;try{L.displayName="BaseDropdown",L.__docgenInfo={description:"",displayName:"BaseDropdown",props:{children:{defaultValue:null,description:"trigger component",name:"children",required:!1,type:{name:"ReactNode"}},triggerType:{defaultValue:{value:'"click"'},description:"",name:"triggerType",required:!1,type:{name:"enum",value:[{value:'"click"'},{value:'"hover"'}]}},overlay:{defaultValue:null,description:"dropdown component",name:"overlay",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"trigger wrapper styles",name:"style",required:!1,type:{name:"CSSProperties"}},overlayContainerStyle:{defaultValue:null,description:"dropdown wrapper styles",name:"overlayContainerStyle",required:!1,type:{name:"CSSProperties"}},position:{defaultValue:{value:`undefined = auto
dropdown position: "top-left" | "top-right" | "bottom-left" | "bottom-right" | "top" | "bottom" | undefined = auto`},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"bottom"'},{value:'"top"'},{value:'"top-left"'},{value:'"top-right"'},{value:'"bottom-left"'},{value:'"bottom-right"'}]}},visible:{defaultValue:null,description:"dropdown visible",name:"visible",required:!1,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"dropdown visible onChange callback",name:"onVisibleChange",required:!1,type:{name:"((visible: boolean) => void)"}},disableAutoDismiss:{defaultValue:null,description:"disable the auto dismiss when user click or scroll outside",name:"disableAutoDismiss",required:!1,type:{name:"boolean"}},disableAnimation:{defaultValue:null,description:"disable dropdown enter & leave default animation",name:"disableAnimation",required:!1,type:{name:"boolean"}},parentNodeID:{defaultValue:{value:"dropdownPortalID (`orthogonal-dropdown-overlay`)"},description:"ID of the dom element, which will be insert the dropdown items",name:"parentNodeID",required:!1,type:{name:"string"}},scrollRef:{defaultValue:null,description:"the scroll element ref, add listener to watch scroll event",name:"scrollRef",required:!1,type:{name:"RefObject<HTMLElement>"}},fitToTrigger:{defaultValue:{value:"false"},description:"@description when set to true, overlay position should cover trigger",name:"fitToTrigger",required:!1,type:{name:"boolean"}}}}}catch{}export{L as B};
//# sourceMappingURL=Dropdown-c607c77d.js.map
