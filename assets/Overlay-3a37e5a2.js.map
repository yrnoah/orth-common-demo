{"version":3,"file":"Overlay-3a37e5a2.js","sources":["../../../paas-library/src/Dropdown/Selection/common.ts","../../../paas-library/src/Dropdown/Selection/Overlay.tsx"],"sourcesContent":["export const defaultWidth = 136;\nexport const defaultHeight = 24;\nexport const defaultRect: { width: number; height: number } = {\n  width: defaultWidth,\n  height: defaultHeight,\n};\n\nexport const bindRef = <T extends HTMLElement>(\n  element: T,\n  refCallback?: React.ForwardedRef<T>\n) => {\n  if (refCallback) {\n    if (typeof refCallback === \"function\") {\n      refCallback(element);\n      return;\n    }\n    if (refCallback && \"current\" in refCallback) refCallback.current = element;\n  }\n};\n","import { memo, useEffect, useRef } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport useCurrent from \"../../hooks/useCurrent\";\nimport { IconCheckSmall } from \"../../icons\";\nimport { type BaseOption, type OverlayProps } from \"./types\";\n\nexport const Overlay = memo(\n  <TOption extends BaseOption>(props: OverlayProps<TOption>) => {\n    const { options, disabled, onSelect, resetText, selected, visible, _ref } =\n      props;\n    const refDict = useRef<Record<string, HTMLLIElement | null>>({});\n    const currentSelected = useCurrent(selected);\n    // scroll selected into view\n    useEffect(() => {\n      if (!visible) return;\n      if (!currentSelected.current) return;\n      if (!refDict.current[currentSelected.current]) return;\n      refDict.current[currentSelected.current]?.scrollIntoView();\n    }, [currentSelected, refDict, visible]);\n    if (!options || disabled) return null;\n    return (\n      <OptionsWrapper\n        ref={_ref}\n        onScroll={(e) => {\n          e.stopPropagation();\n          e.preventDefault();\n        }}\n      >\n        {!!resetText && (\n          <Option\n            onClick={() => {\n              if (onSelect) onSelect(null);\n            }}\n          >\n            {resetText}\n          </Option>\n        )}\n        {options.map((item) => (\n          <Option\n            ref={(element) => {\n              refDict.current[item.key] = element;\n            }}\n            key={item.key}\n            $active={item.key === selected}\n            onClick={() => {\n              if (onSelect) onSelect(item);\n            }}\n          >\n            <SelectedIcon />\n            <span>{item.text ?? item.key}</span>\n          </Option>\n        ))}\n      </OptionsWrapper>\n    );\n  }\n);\n\nconst SelectedIcon = styled(IconCheckSmall)`\n  width: 16px;\n  height: 16px;\n  color: ${(p) => p.theme.colors.textInput.default};\n  position: absolute;\n  left: 12px;\n  top: 8px;\n  opacity: 0;\n  pointer-events: none;\n`;\n\nexport const Option = styled.li<{ $active?: boolean }>`\n  ${(p) => p.theme.flex.row}\n  width: 100%;\n  padding: 8px 12px 8px 36px;\n  overflow: hidden;\n  background-color: #fff;\n  position: relative;\n  user-select: none;\n  word-break: break-all;\n\n  ${({ $active }) =>\n    $active &&\n    css`\n      ${SelectedIcon} {\n        opacity: 1;\n      }\n    `}\n\n  &:hover {\n    background-color: ${(p) => p.theme.colors.button.hovered};\n  }\n`;\n\nexport const OptionsWrapper = styled.ul`\n  padding: 0;\n  margin: ${(p) => p.theme.padding.xxxxs}px 0;\n  list-style: none;\n  ${(p) => p.theme.fonts[\"Caption-Large/Bold\"]}\n  color: ${(p) => p.theme.colors.textInput.default};\n  width: 100%;\n  max-height: 70vh;\n  overflow-y: auto;\n  ${(p) => p.theme.scrollbar}\n  border-radius: ${(p) => p.theme.radius.xxxxs}px;\n  border: 1px solid ${(p) => p.theme.colors.button.hovered};\n  background-color: #fff;\n`;\n"],"names":["defaultWidth","defaultHeight","defaultRect","width","height","bindRef","element","refCallback","current","Overlay","memo","props","options","disabled","onSelect","resetText","selected","visible","_ref","refDict","useRef","currentSelected","useCurrent","useEffect","jsxs","OptionsWrapper","e","jsx","Option","item","SelectedIcon","styled","IconCheckSmall","p","li","row","$active","css","ul","xxxxs","default","scrollbar"],"mappings":"sPAAO,MAAMA,EAAe,IACfC,EAAgB,GAChBC,EAAiD,CAC5DC,MAAOH,EACPI,OAAQH,CACV,EAEaI,EAAU,CACrBC,EACAC,IACG,CACH,GAAIA,EAAa,CACX,GAAA,OAAOA,GAAgB,WAAY,CACrCA,EAAYD,CAAO,EACnB,OAEEC,GAAe,YAAaA,IAAaA,EAAYC,QAAUF,GAEvE,ECZOG,EAAAC,EAAAA,KAAAC,GAAA,CAEH,KAAA,CAAM,QAAAC,EAAEA,SAAAA,EAASC,SAAAA,EAAUC,UAAAA,EAAUC,SAAAA,EAAWC,QAAAA,EAAUC,KAAAA,CAASC,EAAAA,EAEnEC,EAAAC,SAAA,CAAA,CAAA,EACAC,EAAAC,EAAAN,CAAA,EAQA,OANAO,EAAAA,UAAAA,IAAAA,OACEN,GACAI,EAAA,SACAF,EAAA,QAAAE,EAAA,OAAA,KACAF,EAAAA,EAAAA,QAAAA,EAAAA,OAAAA,IAAAA,MAAAA,EAAAA,iBAAyD,EAAA,CAAAE,EAAAF,EAAAF,CAAA,CAAA,EAE3D,CAAAL,GAAAC,EAA0B,KAC1BW,EAAAA,KAAAC,EAAA,CAAA,IAAAP,EAAA,SAAAQ,GAAA,CAIMA,EAAAA,gBAAAA,EACAA,EAAAA,eAAAA,CAAiB,EAAA,SAAA,CAGlB,CAAA,CAAAX,GAAAY,EAAAA,IAAAC,EAAA,CAAA,QAAA,IAAA,CAGKd,GAAcA,EAAAA,IAAAA,CAAa,EAAA,SAAAC,EAAA,EAI/BH,EAAA,IAAAiB,GAAAL,EAAAA,KAAAI,EAAA,CAAA,IAAAtB,GAAA,CAKIa,EAAAA,QAAAA,EAAAA,GAAAA,EAAAA,CAA4Bb,EAAAA,QAAAA,EAAAA,MAAAA,EAAAA,QAAAA,IAAAA,CAK5BQ,GAAcA,EAAAA,CAAAA,CAAa,EAAA,SAAA,CAG7Ba,EAAA,IAAAG,EAAA,EAAA,EAAaH,EAAA,IAAA,OAAA,CAAA,SAAAE,EAAA,MAAAA,EAAA,IAAA,CACgB,GAAAA,EAAA,GAAA,CAAA,CAEhC,CAAA,CAAA,CAGP,CAAA,EAGFC,EAAAC,EAAAC,CAAA;AAAA;AAAA;AAAA,WAA0CC,GAAAA,EAAA,MAAA,OAAA,UAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWnCL,EAAAG,EAAA;AAAA,IAAsBG,GAAAA,EAAAA,MAAAA,KAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,IACLC,CAAAA,CASnB,QAAAC,CAAU,IAAAA,GAAAC;AAAAA,QAEXA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,wBACIP,GAAAA,EAAAA,MAAAA,OAAAA,OAAAA;AAAAA;AAAAA,EAUDL,EAAAM,EAAA;AAAA;AAAA,YAA8BO,GAAAA,EAAAA,MAAAA,QAAAA;AAAAA;AAAAA,IAEFC,GAAAA,EAAAA,MAAAA,MAAAA,oBAAAA;AAAAA,WAEUN,GAAAA,EAAA,MAAA,OAAA,UAAA;AAAA;AAAA;AAAA;AAAA,IACFO,GAAAA,EAAAA,MAAAA;AAAAA,mBAIxBC,GAAAA,EAAAA,MAAAA,OAAAA;AAAAA,sBACsBF,GAAAA,EAAAA,MAAAA,OAAAA,OAAAA;AAAAA;AAAAA"}