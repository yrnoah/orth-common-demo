{"version":3,"file":"SearchBar.stories-45f09d55.js","sources":["../../../../node_modules/react-use/esm/useFirstMountState.js","../../../../node_modules/react-use/esm/useUpdateEffect.js","../../../paas-library/src/Input/SearchBar/SearchBar.tsx"],"sourcesContent":["import { useRef } from 'react';\nexport function useFirstMountState() {\n    var isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n}\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\nvar useUpdateEffect = function (effect, deps) {\n    var isFirstMount = useFirstMountState();\n    useEffect(function () {\n        if (!isFirstMount) {\n            return effect();\n        }\n    }, deps);\n};\nexport default useUpdateEffect;\n","import React, {\n  forwardRef,\n  memo,\n  useCallback,\n  useDeferredValue,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useUpdateEffect } from \"react-use\";\nimport styled from \"styled-components\";\nimport { IconClose, IconSearch } from \"../../icons\";\nimport { isKeyEnter } from \"../../utils/keyCode\";\n\ninterface SearchInputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  /**\n   * search layout style\n   */\n  style?: React.CSSProperties;\n  /**\n   * search input style\n   */\n  inputStyle?: React.CSSProperties;\n  /**\n   * @link https://react.dev/reference/react/useDeferredValue\n   * @description auto triggered by react useDeferredValue\n   */\n  onSearch?: (v: string) => void;\n  searchIconStyle?: React.CSSProperties;\n  clearIconStyle?: React.CSSProperties;\n}\n\nconst SearchInput = forwardRef<HTMLInputElement, SearchInputProps>(\n  (\n    {\n      style,\n      inputStyle,\n      disabled,\n      onChange,\n      onFocus,\n      onBlur,\n      onKeyUp,\n      onSearch,\n      onClick,\n      onMouseOver,\n      onMouseLeave,\n      searchIconStyle,\n      clearIconStyle,\n      ...rest\n    },\n    ref\n  ) => {\n    const inputRef = useRef<HTMLInputElement>();\n    const onRefCallback = useCallback(\n      (el: HTMLInputElement) => {\n        if (inputRef && el) inputRef.current = el;\n        if (ref && el) {\n          if (typeof ref === \"function\") {\n            ref(el);\n            return;\n          }\n          ref.current = el;\n        }\n      },\n      [inputRef, ref]\n    );\n    const [_input, setInput] = useState<string>(() => {\n      if (typeof rest.value === \"string\") return rest.value;\n      return `${rest.defaultValue || \"\"}`;\n    });\n    const deferredValue = useDeferredValue(_input);\n    const [_focused, setFocus] = useState<boolean>(false);\n    const [_hover, setHover] = useState<boolean>(false);\n\n    const _showClear = useMemo(() => {\n      if (!_input) return false;\n      if (disabled || rest.readOnly) return false;\n      if (_focused || _hover) return true;\n      return false;\n    }, [_focused, _input, _hover, disabled, rest.readOnly]);\n\n    const onClickSearch = useCallback(() => {\n      if (disabled) return;\n      if (onSearch) onSearch(_input);\n    }, [_input, disabled, onSearch]);\n    useUpdateEffect(() => {\n      onClickSearch();\n    }, [deferredValue]);\n\n    const _onChange = useCallback(\n      (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (!event) return;\n        if (onChange) onChange(event);\n        const value = event.target.value || \"\";\n        setInput(value);\n      },\n      [onChange]\n    );\n\n    const onClear = useCallback(() => {\n      if (disabled) return;\n      const el = inputRef.current;\n      const event = new Event(\"onChange\", {\n        bubbles: true,\n      });\n      if (el) {\n        el.value = \"\";\n        el.dispatchEvent(event);\n        el.focus();\n      }\n      if (event.target)\n        _onChange(event as unknown as React.ChangeEvent<HTMLInputElement>);\n      setInput(\"\");\n    }, [_onChange, inputRef, disabled]);\n\n    const _onFocus = (event: React.FocusEvent<HTMLInputElement>) => {\n      if (onFocus) onFocus(event);\n      setFocus(true);\n    };\n\n    const _onBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n      if (onBlur) onBlur(event);\n      setFocus(false);\n    };\n\n    const _onKeyUp = (event: React.KeyboardEvent<HTMLInputElement>) => {\n      if (disabled) return;\n      if (onKeyUp) onKeyUp(event);\n      if (isKeyEnter(event) && onSearch) {\n        onSearch(_input);\n      }\n    };\n    const _onMouseOver = (event: React.MouseEvent<HTMLInputElement>) => {\n      setHover(true);\n      onMouseOver && onMouseOver(event);\n    };\n    const _onMouseLeave = (event: React.MouseEvent<HTMLInputElement>) => {\n      setHover(false);\n      onMouseLeave && onMouseLeave(event);\n    };\n    return (\n      <SearchLayout\n        onMouseOver={_onMouseOver}\n        onMouseLeave={_onMouseLeave}\n        style={style}\n        onClick={onClick}\n      >\n        <Input\n          {...rest}\n          ref={onRefCallback}\n          style={inputStyle}\n          onChange={_onChange}\n          onFocus={_onFocus}\n          onBlur={_onBlur}\n          onKeyUp={_onKeyUp}\n          disabled={disabled}\n          $showClear={_showClear}\n        />\n        <SearchIcon />\n        {_showClear && !disabled && (\n          <ClearIcon style={clearIconStyle} onClick={onClear} />\n        )}\n      </SearchLayout>\n    );\n  }\n);\n\nexport default memo(SearchInput);\n\n/** @issues outline & border-radius https://github.com/google/model-viewer/issues/662#issuecomment-1451606074 */\nexport const SearchLayout = styled.div`\n  width: fit-content;\n  height: fit-content;\n  position: relative;\n`;\n\nconst SearchIcon = styled(IconSearch)`\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  color: ${(p) => p.theme.colors.textInput.minor};\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 16px;\n  pointer-events: none;\n`;\n\nconst ClearIcon = styled(IconClose)`\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  color: ${(p) => p.theme.colors.noColor.Grey13};\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 16px;\n`;\n\nexport const Input = styled.input<{ $showClear?: boolean }>`\n  width: 100%;\n  min-width: 110px;\n  height: 36px;\n  line-height: 36px;\n  flex-shrink: 0;\n  border-radius: ${(p) => p.theme.radius.xxl}px;\n  border: 1px solid ${(p) => p.theme.colors.button.default};\n  outline: none;\n  margin: 0;\n  padding: 0 ${(p) => (p.$showClear ? \"39px\" : \"15px\")} 0 39px;\n  gap: ${(p) => p.theme.padding.xxs}px;\n  ${(p) => p.theme.fonts[\"Body-Medium/Regular\"]}\n  color: ${(p) => p.theme.colors.textInput.default};\n  caret-color: ${(p) => p.theme.colors.textInput.link};\n  background: transparent;\n\n  &::placeholder {\n    color: ${(p) => p.theme.colors.textInput.minor};\n  }\n\n  &::selection {\n    background: ${(p) => p.theme.colors.brandColor.Primary2};\n  }\n\n  &:hover {\n    border: 1px solid ${(p) => p.theme.colors.button.hovered};\n\n    & + ${SearchIcon}, &::placeholder {\n      color: ${(p) => p.theme.colors.textInput.default};\n    }\n  }\n\n  &:focus {\n    border: 1px solid ${(p) => p.theme.colors.textInput.link};\n    background: ${(p) => p.theme.colors.button.default};\n\n    & + ${SearchIcon} {\n      color: ${(p) => p.theme.colors.textInput.default};\n    }\n\n    &::placeholder {\n      color: ${(p) => p.theme.colors.textInput.minor};\n    }\n  }\n`;\n"],"names":["useFirstMountState","isFirst","useRef","useUpdateEffect","effect","deps","isFirstMount","useEffect","useUpdateEffect$1","SearchInput","forwardRef","style","inputStyle","disabled","onChange","onFocus","onBlur","onKeyUp","onSearch","onClick","onMouseOver","onMouseLeave","searchIconStyle","clearIconStyle","ref","inputRef","onRefCallback","useCallback","el","_input","setInput","useState","rest","deferredValue","useDeferredValue","_focused","setFocus","_hover","setHover","_showClear","useMemo","onClickSearch","_onChange","event","value","onClear","_onFocus","_onBlur","_onKeyUp","isKeyEnter","_onMouseOver","_onMouseLeave","jsxs","SearchLayout","jsx","Input","SearchIcon","ClearIcon","SearchBar","memo","styled","IconSearch","p","IconClose","input","xxl","default","xxs","link","minor","Primary2","hovered"],"mappings":"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","x_google_ignoreList":[0,1]}