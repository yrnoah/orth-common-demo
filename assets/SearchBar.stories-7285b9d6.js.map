{"version":3,"file":"SearchBar.stories-7285b9d6.js","sources":["../../../../node_modules/react-use/esm/useFirstMountState.js","../../../../node_modules/react-use/esm/useUpdateEffect.js","../../../paas-library/src/Input/SearchBar/SearchBar.tsx"],"sourcesContent":["import { useRef } from 'react';\nexport function useFirstMountState() {\n    var isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n}\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\nvar useUpdateEffect = function (effect, deps) {\n    var isFirstMount = useFirstMountState();\n    useEffect(function () {\n        if (!isFirstMount) {\n            return effect();\n        }\n    }, deps);\n};\nexport default useUpdateEffect;\n","import React, {\n  forwardRef,\n  memo,\n  useCallback,\n  useDeferredValue,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useUpdateEffect } from \"react-use\";\nimport styled from \"styled-components\";\nimport { IconClose, IconSearch } from \"../../icons\";\nimport { isKeyEnter } from \"../../utils/keyCode\";\n\ninterface SearchInputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  /**\n   * search layout style\n   */\n  style?: React.CSSProperties;\n  /**\n   * search input style\n   */\n  inputStyle?: React.CSSProperties;\n  /**\n   * @link https://react.dev/reference/react/useDeferredValue\n   * @description auto triggered by react useDeferredValue\n   */\n  onSearch?: (v: string) => void;\n  searchIconStyle?: React.CSSProperties;\n  clearIconStyle?: React.CSSProperties;\n}\n\nconst SearchInput = forwardRef<HTMLInputElement, SearchInputProps>(\n  (\n    {\n      style,\n      inputStyle,\n      disabled,\n      onChange,\n      onFocus,\n      onBlur,\n      onKeyUp,\n      onSearch,\n      onClick,\n      onMouseOver,\n      onMouseLeave,\n      searchIconStyle,\n      clearIconStyle,\n      ...rest\n    },\n    ref\n  ) => {\n    const inputRef = useRef<HTMLInputElement>();\n    const onRefCallback = useCallback(\n      (el: HTMLInputElement) => {\n        if (inputRef && el) inputRef.current = el;\n        if (ref && el) {\n          if (typeof ref === \"function\") {\n            ref(el);\n            return;\n          }\n          ref.current = el;\n        }\n      },\n      [inputRef, ref]\n    );\n    const [_input, setInput] = useState<string>(() => {\n      if (typeof rest.value === \"string\") return rest.value;\n      return `${rest.defaultValue || \"\"}`;\n    });\n    const deferredValue = useDeferredValue(_input);\n    const [_focused, setFocus] = useState<boolean>(false);\n    const [_hover, setHover] = useState<boolean>(false);\n\n    const _showClear = useMemo(() => {\n      if (!_input) return false;\n      if (disabled || rest.readOnly) return false;\n      if (_focused || _hover) return true;\n      return false;\n    }, [_focused, _input, _hover, disabled, rest.readOnly]);\n\n    const onClickSearch = useCallback(() => {\n      if (disabled) return;\n      if (onSearch) onSearch(_input);\n    }, [_input, disabled, onSearch]);\n    useUpdateEffect(() => {\n      onClickSearch();\n    }, [deferredValue]);\n\n    const _onChange = useCallback(\n      (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (!event) return;\n        if (onChange) onChange(event);\n        const value = event.target.value || \"\";\n        setInput(value);\n      },\n      [onChange]\n    );\n\n    const onClear = useCallback(() => {\n      if (disabled) return;\n      const el = inputRef.current;\n      const event = new Event(\"onChange\", {\n        bubbles: true,\n      });\n      if (el) {\n        el.value = \"\";\n        el.dispatchEvent(event);\n        el.focus();\n      }\n      if (event.target)\n        _onChange(event as unknown as React.ChangeEvent<HTMLInputElement>);\n      setInput(\"\");\n    }, [_onChange, inputRef, disabled]);\n\n    const _onFocus = (event: React.FocusEvent<HTMLInputElement>) => {\n      if (onFocus) onFocus(event);\n      setFocus(true);\n    };\n\n    const _onBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n      if (onBlur) onBlur(event);\n      setFocus(false);\n    };\n\n    const _onKeyUp = (event: React.KeyboardEvent<HTMLInputElement>) => {\n      if (disabled) return;\n      if (onKeyUp) onKeyUp(event);\n      if (isKeyEnter(event) && onSearch) {\n        onSearch(_input);\n      }\n    };\n    const _onMouseOver = (event: React.MouseEvent<HTMLInputElement>) => {\n      setHover(true);\n      onMouseOver && onMouseOver(event);\n    };\n    const _onMouseLeave = (event: React.MouseEvent<HTMLInputElement>) => {\n      setHover(false);\n      onMouseLeave && onMouseLeave(event);\n    };\n    return (\n      <SearchLayout\n        onMouseOver={_onMouseOver}\n        onMouseLeave={_onMouseLeave}\n        style={style}\n        onClick={onClick}\n      >\n        <Input\n          {...rest}\n          ref={onRefCallback}\n          style={inputStyle}\n          onChange={_onChange}\n          onFocus={_onFocus}\n          onBlur={_onBlur}\n          onKeyUp={_onKeyUp}\n          disabled={disabled}\n          $showClear={_showClear}\n        />\n        <SearchIcon />\n        {_showClear && !disabled && (\n          <ClearIcon style={clearIconStyle} onClick={onClear} />\n        )}\n      </SearchLayout>\n    );\n  }\n);\n\nexport default memo(SearchInput);\n\n/** @issues outline & border-radius https://github.com/google/model-viewer/issues/662#issuecomment-1451606074 */\nexport const SearchLayout = styled.div`\n  width: fit-content;\n  height: fit-content;\n  position: relative;\n`;\n\nconst SearchIcon = styled(IconSearch)`\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  color: ${(p) => p.theme.colors.textInput.minor};\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 16px;\n  pointer-events: none;\n`;\n\nconst ClearIcon = styled(IconClose)`\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  color: ${(p) => p.theme.colors.noColor.Grey13};\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 16px;\n`;\n\nexport const Input = styled.input<{ $showClear?: boolean }>`\n  width: 100%;\n  min-width: 110px;\n  height: 36px;\n  line-height: 36px;\n  flex-shrink: 0;\n  border-radius: ${(p) => p.theme.radius.xxl}px;\n  border: 1px solid ${(p) => p.theme.colors.button.default};\n  outline: none;\n  margin: 0;\n  padding: 0 ${(p) => (p.$showClear ? \"39px\" : \"15px\")} 0 39px;\n  gap: ${(p) => p.theme.padding.xxs}px;\n  ${(p) => p.theme.fonts[\"Body-Medium/Regular\"]}\n  color: ${(p) => p.theme.colors.textInput.default};\n  caret-color: ${(p) => p.theme.colors.textInput.link};\n  background: transparent;\n\n  &::placeholder {\n    color: ${(p) => p.theme.colors.textInput.minor};\n  }\n\n  &::selection {\n    background: ${(p) => p.theme.colors.brandColor.Primary2};\n  }\n\n  &:hover {\n    border: 1px solid ${(p) => p.theme.colors.button.hovered};\n\n    & + ${SearchIcon}, &::placeholder {\n      color: ${(p) => p.theme.colors.textInput.default};\n    }\n  }\n\n  &:focus {\n    border: 1px solid ${(p) => p.theme.colors.textInput.link};\n    background: ${(p) => p.theme.colors.button.default};\n\n    & + ${SearchIcon} {\n      color: ${(p) => p.theme.colors.textInput.default};\n    }\n\n    &::placeholder {\n      color: ${(p) => p.theme.colors.textInput.minor};\n    }\n  }\n`;\n"],"names":["useFirstMountState","isFirst","useRef","useUpdateEffect","effect","deps","isFirstMount","useEffect","useUpdateEffect$1","SearchInput","forwardRef","style","inputStyle","disabled","onChange","onFocus","onBlur","onKeyUp","onSearch","onClick","onMouseOver","onMouseLeave","searchIconStyle","clearIconStyle","rest","ref","inputRef","onRefCallback","useCallback","el","_input","setInput","useState","deferredValue","useDeferredValue","_focused","setFocus","_hover","setHover","_showClear","useMemo","onClickSearch","_onChange","event","value","onClear","jsxs","SearchLayout","jsx","Input","isKeyEnter","SearchIcon","ClearIcon","SearchBar","memo","styled","IconSearch","p","IconClose"],"mappings":"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","x_google_ignoreList":[0,1]}