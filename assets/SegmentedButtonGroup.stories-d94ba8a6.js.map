{"version":3,"file":"SegmentedButtonGroup.stories-d94ba8a6.js","sources":["../../../paas-library/src/Buttons/SegmentedButton/SegmentedButtonGroup.tsx"],"sourcesContent":["import { ComponentPropsWithRef, useState } from \"react\";\nimport { SegmentedButton, type SegmentedButtonProps } from \"./SegmentedButton\";\nimport styled, { css } from \"styled-components\";\nimport { fixedForwardRef } from \"../../utils/component\";\n\nexport type SegmentedButtonGroupOption = {\n  properties: Omit<ComponentPropsWithRef<typeof SegmentedButton>, \"$active\">;\n  key: string;\n};\n\nexport interface SegmentedButtonGroupProps<\n  TOption extends SegmentedButtonGroupOption\n> extends ComponentPropsWithRef<\"div\"> {\n  /** @description option.key | option.key array */\n  active?: string;\n  onActiveChange?: (\n    activeKey: TOption[\"key\"],\n    event: React.MouseEvent<HTMLButtonElement>\n  ) => void;\n  /** @description button array */\n  option: TOption[];\n  /**\n   * @default false\n   * @description\n   * override single button $instance;\n   * when true: width=fit-content | min-width=unset\n   * when false width=auto | min-width=64\n   */\n  $instance?: boolean;\n  /**\n   * @default medium\n   * @description\n   * override single button $size;\n   * small: min-height=32, horizontal-padding=6 | medium: min-height=36, horizontal-padding=12\n   */\n  $size?: SegmentedButtonProps[\"$size\"];\n  /**\n   * @default false\n   * @description override single button disable;\n   */\n  disabled?: boolean;\n  /**\n   * @description if fixedForwardRef & ref not work, try _ref\n   * @todo should fix when react19 release\n   */\n  _ref?: React.ForwardedRef<HTMLDivElement>;\n}\n\n/**\n * @note for generic type usage, if need to use ref, please import fixedForwardRef from utils/components and `const SegmentedButtonGroup = fixedForwardRef(RawSegmentedButtonGroup);`\n * @design https://www.figma.com/design/JGFHYME2p7RpeMYcoMqooS/ODE-Library-1.0?node-id=6011-9842&t=FAzx6jwix7ISvVDA-4\n * @description radio (single) active\n */\nexport const SegmentedButtonGroup = <\n  TOption extends SegmentedButtonGroupOption\n>(\n  props: SegmentedButtonGroupProps<TOption>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) => {\n  const {\n    option,\n    $instance = false,\n    $size = \"medium\",\n    active,\n    disabled = false,\n    onActiveChange,\n    _ref,\n    ...containerProps\n  } = props;\n  const [innerActive, setActive] = useState(() => {\n    if (typeof active === \"string\") return active;\n    return \"\";\n  });\n  const _active = typeof active === \"string\" ? active : innerActive;\n  return (\n    <Container\n      {...containerProps}\n      $size={$size}\n      disabled={disabled}\n      ref={(element) => {\n        if (_ref) {\n          if (typeof _ref === \"function\") {\n            _ref(element);\n            return;\n          }\n          if (\"current\" in _ref) _ref.current = element;\n        }\n        if (ref) {\n          if (typeof ref === \"function\") {\n            ref(element);\n            return;\n          }\n          if (\"current\" in ref) ref.current = element;\n        }\n      }}\n    >\n      {option.map((item) => {\n        const isActive = _active === item.key;\n        const overrideProperties: Partial<\n          ComponentPropsWithRef<typeof SegmentedButton>\n        > = { $size, $instance };\n        /** override disabled, control by parent */\n        if (disabled) overrideProperties.disabled = true;\n        if (disabled && !isActive) {\n          overrideProperties.style = {\n            ...(item.properties?.style || {}),\n            backgroundColor: \"transparent\",\n          };\n        }\n        return (\n          <SegmentedButton\n            {...item.properties}\n            {...overrideProperties}\n            $active={isActive}\n            onClick={(event) => {\n              if (disabled) return;\n              if (_active === item.key) return;\n              item.properties?.onClick?.(event);\n              onActiveChange?.(item.key, event);\n              setActive(item.key);\n            }}\n            key={item.key}\n          />\n        );\n      })}\n    </Container>\n  );\n};\n\nexport const SegmentedButtonGroupWithRef =\n  fixedForwardRef(SegmentedButtonGroup);\n\ntype ContainerProps = Required<\n  Pick<\n    SegmentedButtonGroupProps<SegmentedButtonGroupOption>,\n    \"$size\" | \"disabled\"\n  >\n>;\n\nconst Container = styled.div<ContainerProps>`\n  ${(p) => p.theme.flex.row}\n  width: fit-content;\n  overflow: hidden;\n  background-color: #f8fafc;\n  transition: background-color 0.2s ease;\n  ${({ $size, theme }) => {\n    if ($size === \"large\") {\n      return css`\n        padding: 4px;\n        border-radius: ${theme.radius.s}px;\n      `;\n    }\n    return css`\n      padding: 2px;\n      border-radius: ${theme.radius.xxxs}px;\n    `;\n  }}\n\n  ${({ disabled }) => {\n    if (disabled) {\n      return css`\n        background-color: transparent;\n      `;\n    }\n    return undefined;\n  }}\n`;\n"],"names":["SegmentedButtonGroup","props","ref","option","$size","active","onActiveChange","_ref","containerProps","innerActive","setActive","useState","_active","jsx","Container","disabled","element","item","isActive","overrideProperties","$instance","_a","createElement","SegmentedButton","event","SegmentedButtonGroupWithRef","fixedForwardRef","styled","div","row","css"],"mappings":"kSAqDO,MAAAA,EAAA,CAAAC,EAAAC,IAAA,CAML,KAAA,CAAM,OAAAC,EACJA,UAAAA,EAAAA,GACY,MAAAC,EAAA,SACJ,OAAAC,EACRA,SAAAA,EAAAA,GACW,eAAAC,EACXA,KAAAA,EACAC,GAAAA,CACGC,EAAAA,EAEL,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,IACE,OAAAN,GAAA,SAAgCA,EAChC,EAAO,EAETO,EAAA,OAAAP,GAAA,SAAAA,EAAAI,EACA,OAAAI,EAAA,IAAAC,EAAA,CAAA,GAAAN,EAAA,MAAAJ,EAAA,SAAAW,EAAA,IAAAC,GAAA,CAMM,GAAAT,EAAA,CACE,GAAA,OAAAA,GAAA,WAAA,CACEA,EAAAA,CAAAA,EACA,OAEF,YAAAA,IAAuBA,EAAAA,QAAAA,GAEzB,GAAAL,EAAA,CACE,GAAA,OAAAA,GAAA,WAAA,CACEA,EAAAA,CAAAA,EACA,OAEF,YAAAA,IAAsBA,EAAAA,QAAAA,GACxB,EAAA,SAAAC,EAAA,IAAAc,GAAA,OAIA,MAAAC,EAAAN,IAAAK,EAAA,IACAE,EAAA,CAEI,MAAAf,EAAEA,UAAAA,CAAOgB,EAEb,OAAAL,IAAcI,EAAAA,SAAAA,IACdJ,GAAA,CAAAG,IACEC,EAAAA,MAAAA,CAA2B,KAAAE,EAAAJ,EAAA,aAAA,YAAAI,EAAA,QAAA,CAAA,EACM,gBAAA,aACd,GAGrBC,gBAAAC,EAAA,CAAA,GAAAN,EAAA,WAAA,GAAAE,EAAA,QAAAD,EAAA,QAAAM,GAAA,SAMMT,GACAH,IAAAK,EAAA,OACAA,GAAAA,EAAAA,EAAAA,aAAAA,YAAAA,EAAAA,UAAAA,MAAAA,EAAAA,KAAAA,EAAAA,GACAX,GAAAA,MAAAA,EAAAA,EAAAA,IAAAA,GACAI,EAAAA,EAAAA,GAAAA,EAAkB,EAAA,IAAAO,EAAA,GAAA,CAAA,CAGpB,CAAA,CAAA,CAAA,CAKZ,EAEOQ,EAAAC,EAAA1B,CAAA,EAUPc,EAAAa,EAAA;AAAA,IAAyBC,GAAAA,EAAAA,MAAAA,KAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,IACDC,CAAAA,CAKnB,MAAAzB,EAAEA,MAAAA,CAAa,IAChBA,IAAA,QACE0B;AAAAA;AAAAA,yBAAOA,EAAAA,OAAAA;AAAAA,QAKTA;AAAAA;AAAAA,uBAAOA,EAAAA,OAAAA;AAAAA;AAAAA;AAAAA,IAIT,CAAA,CAEG,SAAAf,CAAW,IAAA,CACZ,GAAAA,EACE,OAAAe;AAAAA;AAAAA,OAKJ;AAAA;;;;;;;;;;;;;;;;;"}