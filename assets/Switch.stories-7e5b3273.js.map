{"version":3,"file":"Switch.stories-7e5b3273.js","sources":["../../../paas-library/src/Switch/Switch.tsx"],"sourcesContent":["import { memo, forwardRef, useState, useMemo } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { hexToRgb } from \"../styles/colors\";\n\nexport interface OrthSwitchProps\n  extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"onChange\"> {\n  /**\n   * @default brandColor.Primary7: \"#457D96\"\n   * @description active color for slider dot\n   */\n  activeColor?: string;\n  /** @default #f0f0f0 */\n  activeBackgroundColor?: string;\n  /**\n   * @default Neutral_300: \"#BFBFBF\"\n   * @description default color for button wrapper\n   */\n  defaultColor?: string;\n  /** @default #f0f0f0 */\n  defaultBackgroundColor?: string;\n  /**\n   * @default rgba(0,0,0,0.1)\n   * @description default color for button border\n   */\n  defaultBorderColor?: string;\n  /** @default theme.colors.Oxfordblue_500 opacity 0.2 */\n  activeBorderColor?: string;\n  /** @default 0 */\n  borderWidth?: number;\n  /**\n   * @default undefined\n   * @description if set, state outside control the switch\n   */\n  checked?: boolean;\n  /** @default false */\n  defaultChecked?: boolean;\n  /** @default false */\n  disabled?: boolean;\n  /** @default 300 @unit million seconds @description transition duration */\n  duration?: number;\n  /** @default linear @description transition timing function */\n  transitionTiming?: React.CSSProperties[\"transitionTimingFunction\"];\n  /** @default 3 @min 3 @unit pixel */\n  padding?: number;\n  /** @default 3 @unit pixel */\n  minPadding?: number;\n  /**\n   * @default 10\n   * @unit pixel\n   * @description dot size\n   */\n  size?: number;\n  /**\n   * @min size + padding * 2 + borderWidth\n   * @description container width, if not set, width = size * 2.6 + padding + border-size\n   */\n  width?: number;\n  onChange?: (\n    checked: boolean,\n    event: React.MouseEvent<HTMLButtonElement>\n  ) => void;\n}\n\nexport interface WrapperProps\n  extends Pick<\n    OrthSwitchProps,\n    | \"activeColor\"\n    | \"activeBackgroundColor\"\n    | \"defaultColor\"\n    | \"defaultBackgroundColor\"\n    | \"disabled\"\n    | \"defaultBorderColor\"\n    | \"activeBorderColor\"\n    | \"duration\"\n    | \"transitionTiming\"\n  > {\n  active: boolean;\n  translateX: number;\n  size: number;\n}\n\n/**\n * @link https://www.figma.com/file/l4NEBUfwUwaVNZZAkcTARj/FrontPanel-(Copy)?type=design&node-id=1904-32855&mode=design&t=kq8wVW73QlMqbP5I-0\n * @link https://www.figma.com/file/l4NEBUfwUwaVNZZAkcTARj/FrontPanel-(Copy)?type=design&node-id=1785-23057&mode=design&t=AR5HnHCGhclCF8U4-0\n */\nexport const Switch = forwardRef<HTMLButtonElement, OrthSwitchProps>(\n  (props, ref) => {\n    const {\n      size = 10,\n      borderWidth = 0,\n      width,\n      defaultChecked = false,\n      checked,\n      disabled = false,\n      onChange,\n      style,\n      padding = 3,\n      minPadding = 3,\n      ...rest\n    } = props;\n    const [_checked, setChecked] = useState(defaultChecked);\n    const active = typeof checked === \"boolean\" ? checked : _checked;\n    const styles = useMemo(() => {\n      const _padding = Math.max(padding, minPadding);\n      const _borderWidth =\n        borderWidth || parseFloat(`${style?.borderWidth}`) || 0;\n      const minWidth = size + _padding * 2 + _borderWidth;\n      const _width = width || getInnerWidth(size) + _padding * 2 + _borderWidth;\n      const borderRadius = _padding + size * 0.5 + _borderWidth;\n      return {\n        ...(style || {}),\n        padding: _padding,\n        borderRadius,\n        width: Math.max(_width, minWidth),\n        borderWidth: Math.max(_borderWidth, 0),\n      } as const;\n    }, [style, padding, minPadding, size, width, borderWidth]);\n    if (size <= 0) return null;\n    const translateX =\n      styles.width - size - styles.borderWidth - styles.padding * 2;\n    return (\n      <Wrapper\n        type=\"button\"\n        {...rest}\n        ref={ref}\n        active={active}\n        size={size}\n        translateX={translateX}\n        disabled={disabled}\n        style={styles}\n        onClick={(event) => {\n          if (disabled) return;\n          const newValue = !active;\n          if (onChange) onChange(newValue, event);\n          setChecked(newValue);\n        }}\n      >\n        <Dot />\n      </Wrapper>\n    );\n  }\n);\n\nexport default memo(Switch);\n\nexport const Dot = styled.div({});\n\n/** @todo naming #f0f0f0 by design */\nexport const Wrapper = styled.button<WrapperProps>`\n  box-sizing: border-box;\n  background-color: ${(p) => p.defaultBackgroundColor || \"#f0f0f0\"};\n  width: max-content;\n  border-style: solid;\n  border-color: ${(p) => p.defaultBorderColor || \"rgba(0, 0, 0, 0.1)\"};\n  cursor: ${(p) => (p.disabled ? \"not-allowed\" : \"pointer\")};\n\n  ${Dot} {\n    width: ${({ size }) => size}px;\n    height: ${({ size }) => size}px;\n    border-radius: ${({ size }) => size * 0.5}px;\n    background-color: ${(p) => p.defaultColor || p.theme.colors.Neutral_300};\n    transform: translateX(0);\n  }\n\n  ${({ duration, transitionTiming }) => css`\n    transition: all ${duration ?? 300}ms ${transitionTiming || \"linear\"};\n    ${Dot} {\n      transition: all ${duration ?? 300}ms ${transitionTiming || \"linear\"};\n    }\n  `}\n\n  ${({\n    active,\n    theme,\n    disabled,\n    translateX,\n    activeBorderColor,\n    activeColor,\n    activeBackgroundColor,\n  }) => {\n    if (active) {\n      if (disabled) {\n        return css`\n          ${Dot} {\n            transform: translateX(${translateX}px);\n          }\n        `;\n      }\n      let fixedColor = activeBorderColor;\n      let dotBGColor = activeColor || theme.colors.brandColor.Primary7;\n      if (!fixedColor) {\n        const c = hexToRgb(theme.colors.Oxfordblue_500);\n        fixedColor = c\n          ? `rgba(${c.r},${c.g},${c.b},0.2)`\n          : theme.colors.Oxfordblue_500;\n      }\n      return css`\n        border-color: ${fixedColor};\n        background-color: ${activeBackgroundColor || \"#f0f0f0\"};\n        ${Dot} {\n          background-color: ${dotBGColor};\n          transform: translateX(${translateX}px);\n        }\n      `;\n    }\n    return undefined;\n  }}\n`;\n\nconst getInnerWidth = (size: number) => size * 2.6;\n"],"names":["Switch","forwardRef","props","ref","size","borderWidth","width","defaultChecked","checked","disabled","onChange","style","padding","minPadding","rest","_checked","setChecked","useState","active","styles","useMemo","_padding","_borderWidth","minWidth","_width","getInnerWidth","borderRadius","translateX","jsx","Wrapper","event","newValue","Dot","memo","styled","p","duration","transitionTiming","css","theme","activeBorderColor","activeColor","activeBackgroundColor","fixedColor","dotBGColor","c","hexToRgb"],"mappings":"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"}