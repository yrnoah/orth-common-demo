{"version":3,"file":"TabIconButton.stories-4b4b4c62.js","sources":["../../../paas-library/src/Buttons/Tab/IconButton.tsx"],"sourcesContent":["import { forwardRef, useEffect, useRef, useState } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Portal } from \"../../Siblings\";\nimport { tabTooltipPortalID } from \"../../Siblings/portalID\";\nimport { Tooltip, type TooltipProps } from \"../Tooltip\";\n\nexport interface TabIconButtonProps extends React.ComponentProps<\"button\"> {\n  $active?: boolean;\n  /** @description override active styles */\n  $activeThemes?: React.CSSProperties;\n  /** @description override hover styles */\n  $hoverThemes?: React.CSSProperties;\n  /** @description override disabled styles */\n  $disableThemes?: React.CSSProperties;\n  children?: React.ReactNode;\n  /**\n   * @description which portal container to render tooltip\n   */\n  portalID?: string;\n  tooltip?: TooltipProps[\"tooltip\"];\n  tooltipProps?: Omit<\n    TooltipProps,\n    \"tooltip\" | \"tooltipPosition\" | \"parent\" | \"show\" | \"style\"\n  >;\n  /**\n   * @default bottom\n   */\n  tooltipPosition?: TooltipProps[\"tooltipPosition\"];\n  tooltipStyle?: React.CSSProperties;\n}\n\nexport const IconButton = forwardRef<HTMLButtonElement, TabIconButtonProps>(\n  (props, ref) => {\n    const {\n      tooltip,\n      portalID = tabTooltipPortalID,\n      tooltipPosition = \"bottom\",\n      children,\n      tooltipStyle,\n      tooltipProps,\n      ...buttonProps\n    } = props;\n    const _ref = useRef<HTMLButtonElement | null>(null);\n    // refresh position when scroll\n    const [hoveredTime, setHovered] = useState(0);\n    useEffect(() => {\n      return () => {\n        // clear\n        if (_ref.current) _ref.current = null;\n      };\n    }, []);\n    return (\n      <Button\n        {...buttonProps}\n        onMouseOver={(event) => {\n          buttonProps.onMouseOver?.(event);\n          setHovered(Date.now());\n        }}\n        onMouseOut={(event) => {\n          buttonProps.onMouseOut?.(event);\n          setHovered(0);\n        }}\n        onWheel={(event) => {\n          buttonProps.onWheel?.(event);\n          setHovered(Date.now());\n        }}\n        ref={(element) => {\n          _ref.current = element;\n          if (!!ref) {\n            if (typeof ref === \"function\") {\n              ref(element);\n            }\n            if (\"current\" in ref) ref.current = element;\n          }\n        }}\n      >\n        {!!tooltip && (\n          <Portal id={portalID}>\n            <Tooltip\n              {...(tooltipProps || {})}\n              tooltip={tooltip}\n              tooltipPosition={tooltipPosition}\n              parent={_ref}\n              key={`${hoveredTime}`}\n              show={!!hoveredTime}\n              style={tooltipStyle}\n            />\n          </Portal>\n        )}\n        {children}\n      </Button>\n    );\n  }\n);\n\nconst activeThemes = css<TabIconButtonProps>`\n  color: ${(p) => p.theme.colors.elementsContentFocus};\n  background-color: ${(p) => p.theme.colors.elementsLayerActivated};\n\n  ${(p) => (p.$activeThemes ? { ...p.$activeThemes } : undefined)}\n`;\n\nexport const iconButtonStyles = css<TabIconButtonProps>`\n  ${(p) => p.theme.button.reset}\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n  padding: 8px;\n  border-radius: 50%;\n  color: ${(p) => p.theme.colors.elementsContentMain};\n  transition: all 0.2s ease-out;\n\n  &:hover {\n    color: ${(p) => p.theme.colors.elementsContentFocus};\n\n    ${(p) => (p.$hoverThemes ? { ...p.$hoverThemes } : undefined)}\n  }\n\n  &:active {\n    ${activeThemes}\n\n    ${(p) => (p.$activeThemes ? { ...p.$activeThemes } : undefined)}\n  }\n\n  ${(p) => p.$active && activeThemes}\n\n  &:disabled {\n    color: ${(p) => p.theme.colors.elementsContentMain};\n    background-color: transparent;\n    opacity: 0.3;\n    cursor: not-allowed;\n\n    ${(p) => (p.$disableThemes ? { ...p.$disableThemes } : undefined)}\n  }\n`;\n\nconst Button = styled.button.attrs({\n  type: \"button\",\n})<TabIconButtonProps>`\n  ${(p) => p.theme.button.reset}\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n  padding: 8px;\n  border-radius: 50%;\n  color: ${(p) => p.theme.colors.elementsContentMain};\n  transition: all 0.2s ease-out;\n\n  &:hover {\n    color: ${(p) => p.theme.colors.elementsContentFocus};\n\n    ${(p) => (p.$hoverThemes ? { ...p.$hoverThemes } : undefined)}\n  }\n\n  &:active {\n    ${activeThemes}\n\n    ${(p) => (p.$activeThemes ? { ...p.$activeThemes } : undefined)}\n  }\n\n  ${(p) => p.$active && activeThemes}\n\n  &:disabled {\n    color: ${(p) => p.theme.colors.elementsContentMain};\n    background-color: transparent;\n    opacity: 0.3;\n    cursor: not-allowed;\n\n    ${(p) => (p.$disableThemes ? { ...p.$disableThemes } : undefined)}\n  }\n`;\n"],"names":["IconButton","forwardRef","props","ref","tooltip","tabTooltipPortalID","children","tooltipStyle","tooltipProps","buttonProps","_ref","useRef","hoveredTime","setHovered","useState","useEffect","jsxs","Button","event","element","jsx","Portal","portalID","createElement","Tooltip","tooltipPosition","activeThemes","css","elementsContentFocus","elementsLayerActivated","p","reset","row","center","elementsContentMain","undefined","styled"],"mappings":"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"}