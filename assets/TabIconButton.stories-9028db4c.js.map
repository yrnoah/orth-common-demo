{"version":3,"file":"TabIconButton.stories-9028db4c.js","sources":["../../../paas-library/src/Buttons/Tab/IconButton.tsx"],"sourcesContent":["import { forwardRef, useEffect, useRef, useState } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Portal } from \"../../Siblings\";\nimport { tabTooltipPortalID } from \"../../Siblings/portalID\";\nimport { Tooltip, type TooltipProps } from \"../Tooltip\";\n\nexport interface TabIconButtonProps extends React.ComponentProps<\"button\"> {\n  $active?: boolean;\n  /** @description override active styles */\n  $activeThemes?: React.CSSProperties;\n  /** @description override hover styles */\n  $hoverThemes?: React.CSSProperties;\n  /** @description override disabled styles */\n  $disableThemes?: React.CSSProperties;\n  children?: React.ReactNode;\n  /**\n   * @description which portal container to render tooltip\n   */\n  portalID?: string;\n  tooltip?: TooltipProps[\"tooltip\"];\n  tooltipProps?: Omit<\n    TooltipProps,\n    \"tooltip\" | \"tooltipPosition\" | \"parent\" | \"show\" | \"style\"\n  >;\n  /**\n   * @default bottom\n   */\n  tooltipPosition?: TooltipProps[\"tooltipPosition\"];\n  tooltipStyle?: React.CSSProperties;\n}\n\nexport const IconButton = forwardRef<HTMLButtonElement, TabIconButtonProps>(\n  (props, ref) => {\n    const {\n      tooltip,\n      portalID = tabTooltipPortalID,\n      tooltipPosition = \"bottom\",\n      children,\n      tooltipStyle,\n      tooltipProps,\n      ...buttonProps\n    } = props;\n    const _ref = useRef<HTMLButtonElement | null>(null);\n    // refresh position when scroll\n    const [hoveredTime, setHovered] = useState(0);\n    useEffect(() => {\n      return () => {\n        // clear\n        if (_ref.current) _ref.current = null;\n      };\n    }, []);\n    return (\n      <Button\n        {...buttonProps}\n        onMouseOver={(event) => {\n          buttonProps.onMouseOver?.(event);\n          setHovered(Date.now());\n        }}\n        onMouseOut={(event) => {\n          buttonProps.onMouseOut?.(event);\n          setHovered(0);\n        }}\n        onWheel={(event) => {\n          buttonProps.onWheel?.(event);\n          setHovered(Date.now());\n        }}\n        ref={(element) => {\n          _ref.current = element;\n          if (!!ref) {\n            if (typeof ref === \"function\") {\n              ref(element);\n            }\n            if (\"current\" in ref) ref.current = element;\n          }\n        }}\n      >\n        {!!tooltip && (\n          <Portal id={portalID}>\n            <Tooltip\n              {...(tooltipProps || {})}\n              tooltip={tooltip}\n              tooltipPosition={tooltipPosition}\n              parent={_ref}\n              key={`${hoveredTime}`}\n              show={!!hoveredTime}\n              style={tooltipStyle}\n            />\n          </Portal>\n        )}\n        {children}\n      </Button>\n    );\n  }\n);\n\nconst activeThemes = css<TabIconButtonProps>`\n  color: ${(p) => p.theme.colors.elementsContentFocus};\n  background-color: ${(p) => p.theme.colors.elementsLayerActivated};\n\n  ${(p) => (p.$activeThemes ? { ...p.$activeThemes } : undefined)}\n`;\n\nexport const iconButtonStyles = css<TabIconButtonProps>`\n  ${(p) => p.theme.button.reset}\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n  padding: 8px;\n  border-radius: 50%;\n  color: ${(p) => p.theme.colors.elementsContentMain};\n  transition: all 0.2s ease-out;\n\n  &:hover {\n    color: ${(p) => p.theme.colors.elementsContentFocus};\n\n    ${(p) => (p.$hoverThemes ? { ...p.$hoverThemes } : undefined)}\n  }\n\n  &:active {\n    ${activeThemes}\n\n    ${(p) => (p.$activeThemes ? { ...p.$activeThemes } : undefined)}\n  }\n\n  ${(p) => p.$active && activeThemes}\n\n  &:disabled {\n    color: ${(p) => p.theme.colors.elementsContentMain};\n    background-color: transparent;\n    opacity: 0.3;\n    cursor: not-allowed;\n\n    ${(p) => (p.$disableThemes ? { ...p.$disableThemes } : undefined)}\n  }\n`;\n\nconst Button = styled.button.attrs({\n  type: \"button\",\n})<TabIconButtonProps>`\n  ${(p) => p.theme.button.reset}\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n  padding: 8px;\n  border-radius: 50%;\n  color: ${(p) => p.theme.colors.elementsContentMain};\n  transition: all 0.2s ease-out;\n\n  &:hover {\n    color: ${(p) => p.theme.colors.elementsContentFocus};\n\n    ${(p) => (p.$hoverThemes ? { ...p.$hoverThemes } : undefined)}\n  }\n\n  &:active {\n    ${activeThemes}\n\n    ${(p) => (p.$activeThemes ? { ...p.$activeThemes } : undefined)}\n  }\n\n  ${(p) => p.$active && activeThemes}\n\n  &:disabled {\n    color: ${(p) => p.theme.colors.elementsContentMain};\n    background-color: transparent;\n    opacity: 0.3;\n    cursor: not-allowed;\n\n    ${(p) => (p.$disableThemes ? { ...p.$disableThemes } : undefined)}\n  }\n`;\n"],"names":["IconButton","forwardRef","props","ref","tooltip","portalID","tabTooltipPortalID","tooltipPosition","children","tooltipStyle","tooltipProps","buttonProps","_ref","useRef","hoveredTime","setHovered","useState","useEffect","jsxs","Button","event","_a","element","jsx","Portal","createElement","Tooltip","activeThemes","css","p","styled"],"mappings":"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"}