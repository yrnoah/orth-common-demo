{"version":3,"file":"Tooltip-fc84eb61.js","sources":["../../../paas-library/src/utils/convertAnchor.ts","../../../paas-library/src/Buttons/Tooltip.tsx"],"sourcesContent":["/**\n * Returns a function that clamps a number between 0 and the given maximum value.\n * @currying clamp(LargestNumber)(numberToBeClamped)\n * @param {number} max - The maximum value that the returned function will clamp values to.\n * @param {number} n - The number to be clamped\n * @return {number}\n */\nexport const clamp = (max: number) => (n: number) =>\n  Math.min(max, Math.max(0, n));\n\nexport function convertAnchor(\n  rect: DOMRect,\n  position: \"top\" | \"bottom\" | \"left\" | \"right\" = \"bottom\",\n  align: \"start\" | \"center\" | \"end\" = \"center\",\n  gap: number = 0\n): React.CSSProperties {\n  const vw = window.innerWidth ?? document.body.clientWidth;\n  const vh = window.innerHeight ?? document.body.clientHeight;\n  switch (position) {\n    case \"top\":\n      switch (align) {\n        case \"start\":\n          return { left: rect.x, bottom: clamp(vh)(vh - rect.y + gap) };\n        case \"center\":\n          return {\n            left: clamp(vw)(rect.x + rect.width / 2),\n            transform: \"translateX(-50%)\",\n            bottom: clamp(vh)(vh - rect.y + gap),\n          };\n        case \"end\":\n          return {\n            right: clamp(vw)(vw - rect.x - rect.width),\n            bottom: clamp(vh)(vh - rect.y + gap),\n          };\n        default:\n          return {};\n      }\n    case \"bottom\":\n      switch (align) {\n        case \"start\":\n          return { left: rect.x, top: clamp(vh)(rect.y + rect.height + gap) };\n        case \"center\":\n          return {\n            left: clamp(vw)(rect.x + rect.width / 2),\n            transform: \"translateX(-50%)\",\n            top: clamp(vh)(rect.y + rect.height + gap),\n          };\n        case \"end\":\n          return {\n            right: clamp(vw)(vw - rect.x - rect.width),\n            top: clamp(vh)(rect.y + rect.height + gap),\n          };\n        default:\n          return {};\n      }\n    case \"left\":\n      switch (align) {\n        case \"start\":\n          return {\n            right: clamp(vw)(vw - rect.x + gap),\n            top: rect.y,\n          };\n        case \"center\":\n          return {\n            right: clamp(vw)(vw - rect.x + gap),\n            transform: \"translateY(-50%)\",\n            top: clamp(vh)(rect.y + rect.height / 2),\n          };\n        case \"end\":\n          return {\n            right: clamp(vw)(vw - rect.x + gap),\n            bottom: clamp(vh)(vh - rect.y - rect.height),\n          };\n        default:\n          return {};\n      }\n    case \"right\":\n      switch (align) {\n        case \"start\":\n          return {\n            left: clamp(vw)(rect.x + rect.width + gap),\n            top: rect.y,\n          };\n        case \"center\":\n          return {\n            left: clamp(vw)(rect.x + rect.width + gap),\n            transform: \"translateY(-50%)\",\n            top: clamp(vh)(rect.y + rect.height / 2),\n          };\n        case \"end\":\n          return {\n            left: clamp(vw)(rect.x + rect.width + gap),\n            bottom: clamp(vh)(vh - rect.y - rect.height),\n          };\n        default:\n          return {\n            left: clamp(vw)(rect.x + rect.width + gap),\n            top: rect.y,\n          };\n      }\n  }\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { convertAnchor } from \"../utils/convertAnchor\";\n\nexport interface TooltipProps {\n  tooltip?: React.ReactNode;\n  parent: React.RefObject<HTMLButtonElement | null>;\n  /**\n   * @default bottom\n   */\n  tooltipPosition: \"top\" | \"bottom\";\n  show?: boolean;\n  style?: React.CSSProperties;\n}\n\nconst gap = 4;\n\nexport function Tooltip(props: TooltipProps) {\n  const { tooltip, parent, tooltipPosition, show } = props;\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n  const [fixedPosition, setFixedPosition] = useState<\n    React.CSSProperties | undefined\n  >(undefined);\n  useEffect(() => {\n    const tooltipRect = tooltipRef.current?.getBoundingClientRect();\n    const windowWidth = window.innerWidth ?? document.body.clientWidth;\n    if (tooltipRect?.width) {\n      const fixedStyle: React.CSSProperties = {};\n      if (tooltipRect.left < 0) {\n        fixedStyle.left = tooltipRect.left * -1 + gap;\n        setFixedPosition(fixedStyle);\n        return;\n      }\n      if (tooltipRect.right < 0) {\n        fixedStyle.right = tooltipRect.right * -1 + gap;\n        setFixedPosition(fixedStyle);\n        return;\n      }\n      const diff = tooltipRect.left + tooltipRect.width - windowWidth;\n      if (diff > 0) {\n        fixedStyle.right = diff + gap * 2;\n        setFixedPosition(fixedStyle);\n      }\n    }\n  }, []);\n  // const { left, top } = useDropdownPosition(parent.current, tooltipPosition);\n  if (!parent.current) return null;\n  const parentRect = parent.current.getBoundingClientRect();\n  const style = convertAnchor(parentRect, tooltipPosition, \"center\", 8);\n  let bubbleFixedLeft = 0;\n  if (typeof fixedPosition?.left === \"number\") {\n    bubbleFixedLeft = Math.abs(fixedPosition.left);\n  }\n  if (typeof fixedPosition?.right === \"number\") {\n    bubbleFixedLeft = fixedPosition.right * -1;\n  }\n  return (\n    <FixedWrapper style={style}>\n      <TooltipWrapper\n        ref={tooltipRef}\n        style={{\n          ...(props.style || {}),\n          opacity: show ? 1 : 0,\n          ...(fixedPosition || {}),\n        }}\n      >\n        <Bubble\n          width=\"5\"\n          height=\"4\"\n          viewBox=\"0 0 5 4\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          $position={tooltipPosition}\n          $fixedLeft={bubbleFixedLeft}\n        >\n          <path\n            d=\"M1.652 1.3568C2.04367 0.730129 2.95633 0.730129 3.348 1.3568L5 4L-3.82475e-07 4L1.652 1.3568Z\"\n            fill=\"currentColor\"\n          />\n        </Bubble>\n        <>{tooltip}</>\n      </TooltipWrapper>\n    </FixedWrapper>\n  );\n}\n\nconst FixedWrapper = styled.div`\n  pointer-events: none;\n  position: fixed;\n  z-index: ${(p) => p.theme.zIndexes.modal + 1};\n`;\n\ninterface BubbleProps {\n  $position: \"top\" | \"bottom\";\n  $fixedLeft: number;\n}\n\nconst Bubble = styled.svg<BubbleProps>`\n  position: absolute;\n  left: calc(50% - ${(p) => p.$fixedLeft}px);\n\n  ${(p) => {\n    if (p.$position === \"top\")\n      return css`\n        bottom: 0.5px;\n        transform: translate(-50%, 100%) rotate(180deg);\n      `;\n    return css`\n      top: 0.5px;\n      transform: translate(-50%, -100%);\n    `;\n  }}\n`;\n\nconst TooltipWrapper = styled.div`\n  width: fit-content;\n  position: relative;\n  ${(p) => p.theme.fonts.Default}\n  ${(p) => p.theme.flex.row}\n  ${(p) => p.theme.flex.center}\n  z-index: ${(p) => p.theme.zIndexes.modal + 1};\n  color: ${(p) => p.theme.colors.elementsContentMain};\n  background-color: ${(p) => p.theme.colors.container200};\n  gap: 6px;\n  padding: 8px;\n  border-radius: 8px;\n  box-shadow: ${(p) => p.theme.colors.shadowPop};\n\n  ${Bubble} {\n    color: ${(p) => p.theme.colors.container200};\n  }\n`;\n"],"names":["clamp","max","n","Math","min","convertAnchor","rect","position","align","gap","vw","window","innerWidth","document","body","clientWidth","vh","innerHeight","clientHeight","left","x","bottom","y","width","transform","right","top","height","Tooltip","props","tooltip","parent","tooltipPosition","show","tooltipRef","useRef","fixedPosition","setFixedPosition","useState","useEffect","tooltipRect","_a","windowWidth","fixedStyle","diff","parentRect","style","bubbleFixedLeft","jsx","FixedWrapper","jsxs","TooltipWrapper","Bubble","Fragment","styled","div","svg","$fixedLeft","p","css","Default","row","center","elementsContentMain","container200","shadowPop"],"mappings":"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"}