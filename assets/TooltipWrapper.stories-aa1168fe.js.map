{"version":3,"file":"TooltipWrapper.stories-aa1168fe.js","sources":["../../../../node_modules/react-use/esm/useHover.js","../../../paas-library/src/TooltipWrapper/Tooltip.tsx","../../../paas-library/src/TooltipWrapper/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { noop } from './misc/util';\nvar useState = React.useState;\nvar useHover = function (element) {\n    var _a = useState(false), state = _a[0], setState = _a[1];\n    var onMouseEnter = function (originalOnMouseEnter) { return function (event) {\n        (originalOnMouseEnter || noop)(event);\n        setState(true);\n    }; };\n    var onMouseLeave = function (originalOnMouseLeave) { return function (event) {\n        (originalOnMouseLeave || noop)(event);\n        setState(false);\n    }; };\n    if (typeof element === 'function') {\n        element = element(state);\n    }\n    var el = React.cloneElement(element, {\n        onMouseEnter: onMouseEnter(element.props.onMouseEnter),\n        onMouseLeave: onMouseLeave(element.props.onMouseLeave),\n    });\n    return [el, state];\n};\nexport default useHover;\n","import styled, { css } from \"styled-components\";\nimport { TooltipPoint } from \"../icons\";\n\n// The component is complete by Mia, copied from 07.components\n\ntype Location =\n  | \"top\"\n  | \"bottom\"\n  | \"left\"\n  | \"right\"\n  | \"bottom-left\"\n  | \"bottom-right\";\nconst calc = {\n  top: {\n    left: \"50%\",\n    bottom: 0,\n    transform: \"translate(-50%, 100%) rotate(0deg)\",\n  },\n  bottom: {\n    left: \"50%\",\n    top: 0,\n    transform: \"translate(-50%, -100%) rotate(180deg)\",\n  },\n  right: {\n    left: 0,\n    top: \"50%\",\n    transform: \"translate(-90%, -50%) rotate(90deg)\",\n  },\n  left: {\n    right: 0,\n    top: \"50%\",\n    transform: \"translate(90%, -50%) rotate(-90deg)\",\n  },\n  \"bottom-left\": {\n    left: \"20%\",\n    top: 0,\n    transform: \"translate(-50%, -100%) rotate(180deg)\",\n  },\n  \"bottom-right\": {\n    left: \"80%\",\n    top: 0,\n    transform: \"translate(-50%, -100%) rotate(180deg)\",\n  },\n};\n\nexport interface TooltipProps {\n  location?: Location;\n  children?: React.ReactNode;\n  style?: React.CSSProperties;\n  hasBubbleTail?: boolean;\n  bubbleTailStyle?: React.CSSProperties;\n}\n/** @design: https://www.figma.com/design/JGFHYME2p7RpeMYcoMqooS/ODE-Library-1.0?node-id=6029-3784 */\nexport const Tooltip = (props: TooltipProps) => {\n  const { location = \"top\", hasBubbleTail = false, bubbleTailStyle } = props;\n  return (\n    <Wrapper style={props.style}>\n      <Bubble>{props.children}</Bubble>\n      {hasBubbleTail && (\n        <BubbleTail style={{ ...calc[location], ...bubbleTailStyle }} />\n      )}\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.div`\n  position: relative;\n  ${(p) => p.theme.fonts[\"Caption-Large/Regular\"]}\n  line-height: unset;\n`;\n\nconst Bubble = styled.div<{ $theme?: \"dark\" | \"light\" }>`\n  width: fit-content;\n  display: flex;\n  align-items: center;\n  padding: 6px 8px;\n  border-radius: 6px;\n  user-select: none;\n  white-space: nowrap;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.06);\n  ${(p) => (p.$theme === \"light\" ? light : dark)}\n`;\n\nconst dark = css`\n  background: ${(p) => p.theme.colors.noColor.Ash13};\n  color: #fff;\n`;\n\nconst light = css`\n  background: #fff;\n  color: ${(p) => p.theme.colors.noColor.Grey14};\n`;\n\nconst BubbleTail = styled(TooltipPoint)`\n  position: absolute;\n  color: ${(p) => p.theme.colors.noColor.Ash13};\n  width: 5px;\n  height: 4px;\n`;\n","import type {\n  CSSProperties,\n  JSXElementConstructor,\n  ReactElement,\n  ReactNode,\n} from \"react\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useHover } from \"react-use\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport { Portal } from \"../Siblings\";\nimport { Tooltip, type TooltipProps } from \"./Tooltip\";\n\nconst AnimationDuration = { FAST: 150 };\n\nconst portalId = \"tooltip-container\";\n\ninterface Props extends Omit<React.HTMLAttributes<HTMLDivElement>, \"children\"> {\n  /** @property children - Children to be rendered */\n  children: (props: {\n    ref: React.RefObject<HTMLDivElement & SVGSVGElement & HTMLButtonElement>;\n  }) => ReactElement<any, string | JSXElementConstructor<any>>;\n  /** @property padding - Padding between the tooltip and children */\n  padding?: number;\n  /** @property hide - Hide the tooltip */\n  hide?: boolean;\n  /** @property align - Alignment of the tooltip */\n  align?: \"start\" | \"center\" | \"end\";\n  /** @property location - Location of the tooltip */\n  location?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  /** @property alwaysShow - DEBUG ONLY, Always show the tooltip */\n  alwaysShow?: boolean;\n\n  /** @property component - Component to be rendered */\n  component?: ReactNode;\n  /** @property text - Text to be rendered, will be overwrite if component is given */\n  text?: string;\n  /** @property tooltipProps - Props of the tooltip, will be overwrite if component is given */\n  tooltipProps?: TooltipProps;\n\n  /** @property hasWrapperDiv - add a div as wrapper outside the children elements */\n  hasWrapperDiv?: boolean;\n  /** @property wrapperStyle - Style of the tooltip wrapper div, affect the wrapper div if hasWrapperDiv is true */\n  wrapperStyle?: CSSProperties;\n}\n\n/**\n * Tooltip wrapper, provide default tooltip style, can be changed by prop \"component\"\n */\nexport const TooltipWrapper = ({\n  component,\n  text,\n  padding = 12,\n  alwaysShow,\n  align = \"center\",\n  location = \"top\",\n  hide,\n  wrapperStyle,\n  tooltipProps,\n  hasWrapperDiv,\n  children,\n  ...rest\n}: Props) => {\n  const ref = useRef<HTMLDivElement & SVGSVGElement & HTMLButtonElement>(null);\n  const [hoverable, hovered] = useHover(children({ ref }));\n  const rect = ref.current?.getBoundingClientRect();\n\n  const [show, setShow] = useState(alwaysShow);\n  const timeout = useRef<NodeJS.Timeout>();\n  useEffect(() => {\n    if (alwaysShow) return;\n    clearTimeout(timeout.current);\n    if (hovered) {\n      setShow(true);\n    } else {\n      timeout.current = setTimeout(() => {\n        setShow(false);\n      }, AnimationDuration.FAST);\n      return () => {\n        clearTimeout(timeout.current);\n      };\n    }\n  }, [alwaysShow, hovered]);\n\n  const position = useMemo(() => {\n    if (!rect) return {};\n    return convertAnchor(rect, location, align, padding);\n  }, [align, location, padding, rect]);\n\n  if (!component && !text) return hoverable;\n  if (hasWrapperDiv) {\n    return (\n      <div ref={ref} style={{ display: \"flex\", ...wrapperStyle }}>\n        {hoverable}\n        {!hide && show && (\n          <Portal id={portalId}>\n            <Positioning style={position} $anim={alwaysShow || hovered}>\n              {component ?? (\n                <Tooltip location={location} {...tooltipProps} {...rest}>\n                  {text}\n                </Tooltip>\n              )}\n            </Positioning>\n          </Portal>\n        )}\n      </div>\n    );\n  }\n  return (\n    <>\n      {hoverable}\n      {!hide && show && (\n        <Portal id={portalId}>\n          <Positioning style={position} $anim={alwaysShow || hovered}>\n            {component ?? (\n              <Tooltip\n                hasBubbleTail\n                location={location}\n                {...tooltipProps}\n                {...rest}\n              >\n                {text}\n              </Tooltip>\n            )}\n          </Positioning>\n        </Portal>\n      )}\n    </>\n  );\n};\n\nconst Positioning = styled.div<{ $anim: boolean }>`\n  position: fixed;\n  ${({ $anim }) =>\n    $anim\n      ? css`\n          animation: ${fadeIn} ${AnimationDuration.FAST}ms ease-in-out;\n        `\n      : css`\n          animation: ${fadeOut} ${AnimationDuration.FAST}ms ease-in-out;\n        `};\n  z-index: ${(p) => p.theme.zIndexes.dropdownZIndex + 1};\n`;\n\nconst fadeIn = keyframes`\n  from { opacity: 0; }\n  to { opacity: 1; }\n`;\nconst fadeOut = keyframes`\n  from { opacity: 1; }\n  to { opacity: 0; }\n`;\n\ninterface Position {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n  transform?: string;\n}\n\nfunction convertAnchor(\n  rect: DOMRect,\n  location: \"top\" | \"bottom\" | \"left\" | \"right\",\n  align: \"start\" | \"center\" | \"end\",\n  gap: number\n): Position {\n  const vw = window.innerWidth ?? document.body.clientWidth;\n  const vh = window.innerHeight ?? document.body.clientHeight;\n  switch (location) {\n    case \"top\":\n      switch (align) {\n        case \"start\":\n          return {\n            left: rect.x,\n            top: rect.y - gap,\n            transform: \"translateY(-100%)\",\n          };\n        case \"center\":\n          return {\n            left: rect.x + rect.width / 2,\n            top: rect.y - gap,\n            transform: \"translate(-50%, -100%)\",\n          };\n        case \"end\":\n          return {\n            right: vw - rect.x - rect.width,\n            top: rect.y - gap,\n            transform: \"translateY(-100%)\",\n          };\n        default:\n          return {};\n      }\n    case \"bottom\":\n      switch (align) {\n        case \"start\":\n          return { left: rect.x, top: rect.y + rect.height + gap };\n        case \"center\":\n          return {\n            left: rect.x + rect.width / 2,\n            transform: \"translateX(-50%)\",\n            top: rect.y + rect.height + gap,\n          };\n        case \"end\":\n          return {\n            right: vw - rect.x - rect.width,\n            top: rect.y + rect.height + gap,\n          };\n        default:\n          return {};\n      }\n    case \"left\":\n      switch (align) {\n        case \"start\":\n          return {\n            right: vw - rect.x + gap,\n            top: rect.y,\n          };\n        case \"center\":\n          return {\n            right: vw - rect.x + gap,\n            transform: \"translateY(-50%)\",\n            top: rect.y + rect.height / 2,\n          };\n        case \"end\":\n          return {\n            right: vw - rect.x + gap,\n            bottom: vh - rect.y - rect.height,\n          };\n        default:\n          return {};\n      }\n    case \"right\":\n      switch (align) {\n        case \"start\":\n          return {\n            left: rect.x + rect.width + gap,\n            top: rect.y,\n          };\n        case \"center\":\n          return {\n            left: rect.x + rect.width + gap,\n            transform: \"translateY(-50%)\",\n            top: rect.y + rect.height / 2,\n          };\n        case \"end\":\n          return {\n            left: rect.x + rect.width + gap,\n            bottom: vh - rect.y - rect.height,\n          };\n        default:\n          return {\n            left: rect.x + rect.width + gap,\n            top: rect.y,\n          };\n      }\n  }\n}\n"],"names":["useState","React.useState","useHover","element","_a","state","setState","onMouseEnter","originalOnMouseEnter","event","noop","onMouseLeave","originalOnMouseLeave","el","React.cloneElement","useHover$1","calc","Tooltip","props","location","hasBubbleTail","bubbleTailStyle","jsxs","Wrapper","jsx","Bubble","BubbleTail","styled","div","dark","css","light","TooltipPoint","p","AnimationDuration","portalId","TooltipWrapper","component","text","alwaysShow","hide","wrapperStyle","tooltipProps","hasWrapperDiv","children","ref","useRef","hoverable","hovered","rect","show","setShow","timeout","useEffect","clearTimeout","position","useMemo","convertAnchor","align","padding","Fragment","Positioning","$anim","FAST","fadeIn","keyframes","fadeOut","gap","vw","vh","x","width","y","height"],"mappings":"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","x_google_ignoreList":[0]}