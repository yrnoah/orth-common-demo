{"version":3,"file":"inputSelect.stories-0e500cf8.js","sources":["../../../paas-library/src/Dropdown/Selection/DropdownButton.tsx","../../../paas-library/src/utils/optionalFilter.ts","../../../paas-library/src/Dropdown/Selection/InputOption.tsx"],"sourcesContent":["import styled from \"styled-components\";\nimport { colors } from \"../../styles/colors\";\nimport { IconArrowSm } from \"../../icons\";\n\nexport const DropdownButton = styled(IconArrowSm)<{\n  $size: \"small\" | \"medium\";\n}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: ${(p) => (p.$size === \"small\" ? 2.67 : 4)}px;\n  width: ${(p) => (p.$size === \"small\" ? 16 : 24)}px;\n  height: ${(p) => (p.$size === \"small\" ? 16 : 24)}px;\n  background-color: #fff;\n\n  &:hover {\n    background-color: ${colors.button.hovered};\n  }\n`;\n","export function optionalFilter<T = unknown>(\n  arr: Array<T>,\n  fn: (item: T) => boolean,\n  active = true\n) {\n  return active ? arr.filter(fn) : arr;\n}\n","import { useMemo, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { colors, shadows } from \"../../styles/colors\";\nimport { fonts } from \"../../styles/fonts\";\nimport { BaseDropdown, DropdownProps } from \"../Dropdown\";\nimport { DropdownButton } from \"./DropdownButton\";\nimport { optionalFilter } from \"../../utils/optionalFilter\";\n\nconst defaultWidth = 136;\nconst defaultHeight = 24;\nconst defaultRect: { width: number; height: number } = {\n  width: defaultWidth,\n  height: defaultHeight,\n};\n\nexport interface InputOptionProps\n  extends Omit<DropdownProps, \"children\" | \"visible\"> {\n  /** @default string \"small\" */\n  size?: \"small\" | \"medium\";\n  /** @description control directly input element attributes */\n  inputAttrs?: React.InputHTMLAttributes<HTMLInputElement>;\n  /** @description options as string list */\n  options?: string[];\n  /** @description option style */\n  optionStyle?: React.CSSProperties;\n  /** @description wrapper style */\n  wrapperStyle?: React.CSSProperties;\n  /** @description current input value */\n  value?: string;\n  /** @description set value */\n  setValue?: (value: string) => void;\n  /** @description are options can be filtered by the input value @default false */\n  enableFilterOption?: boolean;\n  /** @description is the dropdown start with visible */\n  defaultVisible?: boolean;\n}\n\n//TODO: handle no option cases https://orthogonalpub.atlassian.net/browse/REQ-647\n\n/** @design https://www.figma.com/design/JGFHYME2p7RpeMYcoMqooS/ODE-Library-1.0?node-id=5358-24798&t=XZTN1PE3CDllHgtD-4 */\nexport function InputOption({\n  inputAttrs,\n  defaultVisible,\n  options,\n  optionStyle,\n  size = \"small\",\n  value,\n  setValue,\n  enableFilterOption,\n  wrapperStyle,\n  ...props\n}: InputOptionProps) {\n  const [_open, setOpen] = useState(defaultVisible ?? false);\n  const [focus, setFocus] = useState(false);\n  const [rect, setRect] = useState<{ width: number; height: number }>(\n    defaultRect\n  );\n  const overlay = useMemo(() => {\n    return (\n      <>\n        {!!options &&\n          optionalFilter(\n            options,\n            (option) =>\n              enableFilterOption ? option.includes(value ?? \"\") : true,\n            enableFilterOption\n          ).map((option, i) => (\n            <OptionWrapper\n              key={i}\n              $size={size}\n              onClick={() => {\n                if (setValue) setValue(option);\n                setOpen(false);\n              }}\n              style={{\n                ...optionStyle,\n              }}\n            >\n              {option}\n            </OptionWrapper>\n          ))}\n      </>\n    );\n  }, [enableFilterOption, optionStyle, options, setValue, size, value]);\n  return (\n    <BaseDropdown\n      visible={_open}\n      overlay={overlay}\n      overlayContainerStyle={{\n        background: \"#fff\",\n        borderRadius: \"4px\",\n        overflow: \"hidden\",\n        boxShadow: shadows.hardShadow,\n        width: rect.width,\n      }}\n      {...props}\n      onVisibleChange={(visible) => setOpen(visible)}\n    >\n      <Wrapper\n        ref={(el) => {\n          if (!el) return;\n          const bound = el.getBoundingClientRect();\n          const target = { width: bound.width, height: bound.height };\n          if (rect.width !== target.width || rect.height !== target.height) {\n            setRect(target);\n          }\n        }}\n        style={{\n          borderColor: focus || _open ? colors.textInput.link : undefined,\n          backgroundColor: focus || _open ? \"#fff\" : undefined,\n          padding: size === \"small\" ? \"1px 5px\" : \"8px 5px\",\n          ...wrapperStyle,\n        }}\n      >\n        <Input\n          onChange={(e) => setValue?.(e.target.value)}\n          {...inputAttrs}\n          value={value}\n          onFocus={(e) => {\n            setFocus(true);\n            if (inputAttrs?.onFocus) inputAttrs.onFocus(e);\n          }}\n          onBlur={(e) => {\n            setFocus(false);\n            if (inputAttrs?.onBlur) inputAttrs.onBlur(e);\n          }}\n        />\n        <DropdownButton\n          onClick={() => setOpen(!_open)}\n          $size={size}\n          style={{\n            position: \"absolute\",\n            right: 6,\n          }}\n        />\n      </Wrapper>\n    </BaseDropdown>\n  );\n}\n\nconst Input = styled.input`\n  position: relative;\n  border: none;\n  outline: none;\n  height: 20px;\n  border-radius: 4px;\n  background-color: transparent;\n  color: currentcolor;\n  ${fonts[\"Caption-Large/Regular\"]}\n`;\n\nconst OptionWrapper = styled.div<{ $size?: \"small\" | \"medium\" }>`\n  display: flex;\n  align-items: center;\n  gap: ${({ $size }) => ($size === \"small\" ? `2px 6px` : `8px 6px`)};\n  width: 100%;\n  padding: 2px 12px 2px 32px;\n  min-width: 120px;\n  ${fonts[\"Caption-Large/Regular\"]}\n  line-height: 20px;\n\n  &:hover {\n    background-color: ${colors.button.hovered};\n  }\n`;\n\nconst Wrapper = styled.div`\n  box-sizing: border-box;\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding-right: 36px;\n  border: 1px solid;\n  border-radius: 4px;\n  width: fit-content;\n  border-color: transparent;\n\n  &:hover {\n    border-color: ${colors.button.hovered};\n    background-color: #fff;\n  }\n`;\n"],"names":["DropdownButton","styled","IconArrowSm","p","colors","optionalFilter","arr","fn","active","defaultWidth","defaultHeight","defaultRect","InputOption","inputAttrs","defaultVisible","options","optionStyle","size","value","setValue","enableFilterOption","wrapperStyle","props","_open","setOpen","useState","focus","setFocus","rect","setRect","overlay","useMemo","jsx","Fragment","option","i","OptionWrapper","BaseDropdown","shadows","visible","jsxs","Wrapper","el","bound","target","Input","e","fonts","$size"],"mappings":"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"}